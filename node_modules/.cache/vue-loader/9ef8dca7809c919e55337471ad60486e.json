{"remainingRequest":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/views/ProductList/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/views/ProductList/index.vue","mtime":1586212463649},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IFByb2R1Y3RMaXN0IGZyb20gImNvbXBvbmVudHMvUHJvZHVjdExpc3QiOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIHNlY3Rpb25JZDogewogICAgICBkZWZhdWx0OiAiIiwKICAgIH0sCiAgfSwKICBkYXRlKCkgewogICAgcmV0dXJuIHt9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIG1hdGNoZWRTZWN0aW9uKCkgewogICAgICBsZXQgc2VjdGlvbiA9IHRoaXMuaG9tZVNlY3Rpb25MaXN0LmZpbmQoKHNlY3Rpb24pID0+IHsKICAgICAgICBpZiAoc2VjdGlvbi5zZWN0aW9uSWQgPT0gdGhpcy5zZWN0aW9uSWQpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICBpZiAoIXNlY3Rpb24pIHsKICAgICAgICBzZWN0aW9uID0gewogICAgICAgICAgc3VjY2VzczogZmFsc2UsCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgcmV0dXJuIHNlY3Rpb247CiAgICB9LAogICAgbWF0Y2hlZFByb2R1Y3RMaXN0KCkgewogICAgICBjb25zdCBsaXN0ID0gW107CgogICAgICBpZiAodGhpcy5tYXRjaGVkU2VjdGlvbi5zZWN0aW9uQ29udGVudFR5cGUgPT0gMikgewogICAgICAgIGNvbnN0IHByb2R1Y3RMaXN0ID0gdGhpcy5tYXRjaGVkU2VjdGlvbi5wcm9kdWN0TGlzdDsKICAgICAgICBwcm9kdWN0TGlzdC5mb3JFYWNoKChpZCkgPT4gewogICAgICAgICAgaWYgKHRoaXMucHJvZHVjdExpc3RPYmpbaWRdKSB7CiAgICAgICAgICAgIGNvbnN0IHAgPSB0aGlzLnByb2R1Y3RMaXN0T2JqW2lkXTsKICAgICAgICAgICAgcC5wcm9kdWN0SW1hZ2VMaXN0ID0gSlNPTi5wYXJzZShwLnByb2R1Y3RJbWFnZXMpOwogICAgICAgICAgICBsaXN0LnB1c2gocCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5tYXRjaGVkU2VjdGlvbi5zZWN0aW9uQ29udGVudFR5cGUgPT0gMykgewogICAgICAgIGNvbnN0IHByb2R1Y3RJZFNldCA9IG5ldyBTZXQoKTsKICAgICAgICBpZiAodGhpcy5wcm9kdWN0Q2F0ZWdvcnlMaXN0KSB7CiAgICAgICAgICB0aGlzLnByb2R1Y3RDYXRlZ29yeUxpc3QuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgICAgICBpZiAodGhpcy5tYXRjaGVkU2VjdGlvbi5jYXRlZ29yeUxpc3QuaW5jbHVkZXMoaXRlbS5jYXRlZ29yeUlkKSkgewogICAgICAgICAgICAgIHByb2R1Y3RJZFNldC5hZGQoaXRlbS5wcm9kdWN0SWQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnByb2R1Y3RMaXN0KSB7CiAgICAgICAgICB0aGlzLnByb2R1Y3RMaXN0LmZvckVhY2goKHByb2R1Y3QpID0+IHsKICAgICAgICAgICAgaWYgKHByb2R1Y3RJZFNldC5oYXMocHJvZHVjdC5wcm9kdWN0SWQpKSB7CiAgICAgICAgICAgICAgcHJvZHVjdC5wcm9kdWN0SW1hZ2VMaXN0ID0gSlNPTi5wYXJzZShwcm9kdWN0LnByb2R1Y3RJbWFnZXMpOwogICAgICAgICAgICAgIGxpc3QucHVzaChwcm9kdWN0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gbGlzdDsKICAgIH0sCgogICAgLi4ubWFwR2V0dGVycyhbImhvbWVTZWN0aW9uTGlzdCIsICJwcm9kdWN0TGlzdE9iaiIsICJwcm9kdWN0TGlzdCIsICJwcm9kdWN0Q2F0ZWdvcnlMaXN0Il0pLAogIH0sCiAgd2F0Y2g6IHsKICAgIG1hdGNoZWRTZWN0aW9uKHNlY3Rpb24pIHsKICAgICAgaWYgKHNlY3Rpb24gJiYgc2VjdGlvbi5zdWNjZXNzID09PSBmYWxzZSkgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvIik7CiAgICAgIH0KICAgIH0sCiAgfSwKICBjb21wb25lbnRzOiB7CiAgICAiYXAtcHJvZHVjdC1saXN0IjogUHJvZHVjdExpc3QsCiAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/ProductList","sourcesContent":["<template>\n  <div>\n    <ap-product-list\n      class=\"product-list\"\n      :title=\"matchedSection.sectionName\"\n      :productList=\"matchedProductList\"\n    ></ap-product-list>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport ProductList from \"components/ProductList\";\nexport default {\n  props: {\n    sectionId: {\n      default: \"\",\n    },\n  },\n  date() {\n    return {};\n  },\n  computed: {\n    matchedSection() {\n      let section = this.homeSectionList.find((section) => {\n        if (section.sectionId == this.sectionId) {\n          return true;\n        }\n      });\n\n      if (!section) {\n        section = {\n          success: false,\n        };\n      }\n\n      return section;\n    },\n    matchedProductList() {\n      const list = [];\n\n      if (this.matchedSection.sectionContentType == 2) {\n        const productList = this.matchedSection.productList;\n        productList.forEach((id) => {\n          if (this.productListObj[id]) {\n            const p = this.productListObj[id];\n            p.productImageList = JSON.parse(p.productImages);\n            list.push(p);\n          }\n        });\n      } else if (this.matchedSection.sectionContentType == 3) {\n        const productIdSet = new Set();\n        if (this.productCategoryList) {\n          this.productCategoryList.forEach((item) => {\n            if (this.matchedSection.categoryList.includes(item.categoryId)) {\n              productIdSet.add(item.productId);\n            }\n          });\n        }\n\n        if (this.productList) {\n          this.productList.forEach((product) => {\n            if (productIdSet.has(product.productId)) {\n              product.productImageList = JSON.parse(product.productImages);\n              list.push(product);\n            }\n          });\n        }\n      }\n\n      return list;\n    },\n\n    ...mapGetters([\"homeSectionList\", \"productListObj\", \"productList\", \"productCategoryList\"]),\n  },\n  watch: {\n    matchedSection(section) {\n      if (section && section.success === false) {\n        this.$router.push(\"/\");\n      }\n    },\n  },\n  components: {\n    \"ap-product-list\": ProductList,\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.product-list {\n  margin-top: 50px;\n}\n</style>\n"]}]}