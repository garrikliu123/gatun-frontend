{"remainingRequest":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/components/Cart/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/components/Cart/index.vue","mtime":1587341395050},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IF8gZnJvbSAibG9kYXNoIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwcm9kdWN0TGlzdDogW10KICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIG1hdGNoZWRQcm9kdWN0KCkgewogICAgICBjb25zdCBsaXN0ID0gW107CgogICAgICB0aGlzLnNob3BwaW5nQ2FydC5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgIGNvbnN0IHByb2R1Y3QgPSB0aGlzLnByb2R1Y3RMaXN0T2JqW2l0ZW0ucHJvZHVjdElkXTsKCiAgICAgICAgY29uc3QgaW1hZ2VMaXN0ID0gSlNPTi5wYXJzZShwcm9kdWN0LnByb2R1Y3RJbWFnZXMpOwogICAgICAgIGNvbnN0IHByb2R1Y3RPcHRpb25MaXN0ID0gSlNPTi5wYXJzZShwcm9kdWN0LnByb2R1Y3RPcHRpb25zKTsKICAgICAgICBjb25zdCBvcHRpb25zID0gW107CgogICAgICAgIGlmIChwcm9kdWN0T3B0aW9uTGlzdCkgewogICAgICAgICAgcHJvZHVjdE9wdGlvbkxpc3QuZm9yRWFjaChvID0+IHsKICAgICAgICAgICAgb3B0aW9ucy5wdXNoKHsKICAgICAgICAgICAgICBsYWJlbDogbywKICAgICAgICAgICAgICB2YWx1ZTogbwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgbGlzdC5wdXNoKHsKICAgICAgICAgIHByb2R1Y3RJZDogaXRlbS5wcm9kdWN0SWQsCiAgICAgICAgICBwcm9kdWN0TmFtZTogcHJvZHVjdC5wcm9kdWN0TmFtZSwKICAgICAgICAgIHByb2R1Y3RQcmljZTogcHJvZHVjdC5wcm9kdWN0UHJpY2UsCiAgICAgICAgICBpbWFnZTogaW1hZ2VMaXN0WzBdLAogICAgICAgICAgYW1vdW50OiBpdGVtLmFtb3VudCwKICAgICAgICAgIG9wdGlvbjogaXRlbS5vcHRpb24sCiAgICAgICAgICBvcHRpb25zCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICByZXR1cm4gbGlzdDsKICAgIH0sCiAgICB0b3RhbFByaWNlKCkgewogICAgICBsZXQgcHJpY2UgPSAwOwogICAgICB0aGlzLnByb2R1Y3RMaXN0LmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgcHJpY2UgKz0gaXRlbS5wcm9kdWN0UHJpY2UgKiBpdGVtLmFtb3VudDsKICAgICAgfSk7CiAgICAgIHJldHVybiBwcmljZTsKICAgIH0sCiAgICAuLi5tYXBHZXR0ZXJzKFsicHJvZHVjdExpc3RPYmoiLCAic2hvcHBpbmdDYXJ0Il0pCiAgfSwKCiAgd2F0Y2g6IHsKICAgIG1hdGNoZWRQcm9kdWN0OiB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcihsaXN0KSB7CiAgICAgICAgdGhpcy5wcm9kdWN0TGlzdCA9IF8uY2xvbmVEZWVwKGxpc3QpOwogICAgICB9CiAgICB9CiAgfSwKCiAgbWV0aG9kczogewogICAgb25Qcm9kdWN0VGl0bGVDbGljayhpdGVtKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvcHJvZHVjdC8iICsgaXRlbS5wcm9kdWN0SWQpOwogICAgfSwKCiAgICBvbkRlbGV0ZUNsaWNrKGlkKSB7CiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5wcm9kdWN0TGlzdC5maW5kSW5kZXgoaXRlbSA9PiB7CiAgICAgICAgcmV0dXJuIGl0ZW0ucHJvZHVjdElkID09PSBpZDsKICAgICAgfSk7CiAgICAgIHRoaXMucHJvZHVjdExpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCgogICAgb25DaGVja291dCgpIHsKICAgICAgdGhpcy5vblNhdmVDYXJ0Q2xpY2soKTsKICAgIH0sCgogICAgb25TYXZlQ2FydENsaWNrKCkgewogICAgICB0aGlzLnNldENhcnQodGhpcy5wcm9kdWN0TGlzdCk7CiAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICBtZXNzYWdlOiAiU2F2ZSBFZGl0IFN1Y2Nlc3MiLAogICAgICAgIHNob3dDbG9zZTogdHJ1ZQogICAgICB9KTsKICAgIH0sCgogICAgLi4ubWFwQWN0aW9ucyhbInNldENhcnQiXSkKICB9Cn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/Cart","sourcesContent":["<template>\n  <div class=\"ap-cart\">\n    <div class=\"item-count-text\">\n      <span>{{ shoppingCart.length }} Item(s) in Your Shopping Cart</span>\n    </div>\n    <el-divider class=\"divider\"></el-divider>\n    <div>\n      <div class=\"product-list\" v-for=\"(item, index) in productList\" :key=\"index\">\n        <div class=\"product-item\">\n          <el-image\n            style=\"width: 100px; height: 100px\"\n            :src=\"item.image.url\"\n            fit=\"contain\"\n          ></el-image>\n          <div class=\"text-group\">\n            <div class=\"text-link-wrap\">\n              <el-link class=\"text-link\" @click=\"onProductTitleClick(item)\">{{\n                item.productName\n              }}</el-link>\n            </div>\n            <div class=\"select-group\">\n              <el-input-number size=\"mini\" :min=\"1\" v-model=\"item.amount\"></el-input-number>\n              <el-select\n                v-if=\"item.options.length > 0\"\n                class=\"option-select\"\n                v-model=\"item.option\"\n                size=\"mini\"\n              >\n                <el-option\n                  v-for=\"o in item.options\"\n                  :key=\"o.value\"\n                  :label=\"o.label\"\n                  :value=\"o.value\"\n                >\n                </el-option>\n              </el-select>\n            </div>\n          </div>\n          <div class=\"right-group\">\n            <div\n              class=\"price\"\n              v-if=\"item.productPrice * item.amount >= 1000\"\n              v-format=\"'$#,##0.00'\"\n            >\n              {{ item.productPrice * item.amount }}\n            </div>\n            <div class=\"price\" v-else v-format=\"'$##0.00'\">\n              {{ item.productPrice * item.amount }}\n            </div>\n          </div>\n          <i class=\"delete-icon el-icon-error\" @click=\"onDeleteClick(item.productId)\"></i>\n        </div>\n        <el-divider class=\"divider\"></el-divider>\n      </div>\n      <div class=\"footer-btn-group\">\n        <span class=\"total-price\">\n          Total:\n          <span v-if=\"totalPrice >= 1000\" v-format=\"'$#,##0.00'\">\n            {{ totalPrice }}\n          </span>\n          <span v-else v-format=\"'$##0.00'\">\n            {{ totalPrice }}\n          </span>\n        </span>\n        <div class=\"button-group\">\n          <el-button size=\"small\" @click=\"onSaveCartClick\">SAVE EDIT</el-button>\n          <el-button size=\"small\" type=\"primary\" @click=\"onCheckout\">CHECKOUT</el-button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { mapGetters, mapActions } from \"vuex\";\nimport _ from \"lodash\";\nexport default {\n  data() {\n    return {\n      productList: []\n    };\n  },\n\n  computed: {\n    matchedProduct() {\n      const list = [];\n\n      this.shoppingCart.forEach(item => {\n        const product = this.productListObj[item.productId];\n\n        const imageList = JSON.parse(product.productImages);\n        const productOptionList = JSON.parse(product.productOptions);\n        const options = [];\n\n        if (productOptionList) {\n          productOptionList.forEach(o => {\n            options.push({\n              label: o,\n              value: o\n            });\n          });\n        }\n\n        list.push({\n          productId: item.productId,\n          productName: product.productName,\n          productPrice: product.productPrice,\n          image: imageList[0],\n          amount: item.amount,\n          option: item.option,\n          options\n        });\n      });\n      return list;\n    },\n    totalPrice() {\n      let price = 0;\n      this.productList.forEach(item => {\n        price += item.productPrice * item.amount;\n      });\n      return price;\n    },\n    ...mapGetters([\"productListObj\", \"shoppingCart\"])\n  },\n\n  watch: {\n    matchedProduct: {\n      immediate: true,\n      handler(list) {\n        this.productList = _.cloneDeep(list);\n      }\n    }\n  },\n\n  methods: {\n    onProductTitleClick(item) {\n      this.$router.push(\"/product/\" + item.productId);\n    },\n\n    onDeleteClick(id) {\n      const index = this.productList.findIndex(item => {\n        return item.productId === id;\n      });\n      this.productList.splice(index, 1);\n    },\n\n    onCheckout() {\n      this.onSaveCartClick();\n    },\n\n    onSaveCartClick() {\n      this.setCart(this.productList);\n      this.$message({\n        type: \"success\",\n        message: \"Save Edit Success\",\n        showClose: true\n      });\n    },\n\n    ...mapActions([\"setCart\"])\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.ap-cart {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n\n  .item-count-text {\n    text-align: center;\n    font-weight: bold;\n  }\n\n  .divider {\n    margin: 5px 0 10px;\n  }\n\n  .product-item {\n    position: relative;\n    display: flex;\n    margin-bottom: 5px;\n    height: 100px;\n  }\n\n  .text-group {\n    flex: 0 0 auto;\n    margin: 0 10px;\n    display: flex;\n    flex-direction: column;\n    width: 300px;\n    .text-link-wrap {\n      display: flex;\n    }\n    .text-link {\n      font-weight: bold;\n      text-align: left;\n      word-break: break-all;\n      overflow: hidden;\n      display: -webkit-box;\n      -webkit-box-orient: vertical;\n      -webkit-line-clamp: 2;\n      margin-bottom: 20px;\n      margin-top: 10px;\n    }\n  }\n\n  .price {\n    font-weight: bold;\n  }\n\n  .delete-icon {\n    position: absolute;\n    font-size: 1.2em;\n    top: 45px;\n    right: 0;\n    cursor: pointer;\n    transition: 200ms;\n  }\n\n  .delete-icon:hover {\n    color: #f56c6c;\n  }\n\n  .select-group {\n    display: flex;\n    .option-select {\n      margin: 0 10px;\n    }\n  }\n\n  .footer-btn-group {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    .total-price {\n      font-size: 1.5em;\n      font-weight: bold;\n    }\n\n    .button-group {\n      display: flex;\n    }\n  }\n}\n</style>\n"]}]}