{"remainingRequest":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/babel-loader/lib/index.js!/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/eslint-loader/index.js??ref--13-0!/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/store/actions.js","dependencies":[{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/store/actions.js","mtime":1587331640226},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXgiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIi9Vc2Vycy94aWFuZ2xpdS9EZXZlbG9wbWVudC9Qcm9qZWN0cy94eHgvYXBlcmEtZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0ICogYXMgdHlwZXMgZnJvbSAiLi9tdXRhdGlvbi10eXBlIjsKaW1wb3J0IGNhdGVnb3J5QXBpIGZyb20gImFwaS9jYXRlZ29yeSI7CmltcG9ydCBwcm9kdWN0QXBpIGZyb20gImFwaS9wcm9kdWN0IjsKaW1wb3J0IHByb2R1Y3RDYXRlZ29yeUFwaSBmcm9tICJhcGkvcHJvZHVjdENhdGVnb3J5IjsKaW1wb3J0IHRvcGljQ2F0ZWdvcnlBcGkgZnJvbSAiYXBpL3RvcGljQ2F0ZWdvcnkiOwppbXBvcnQgYXJ0aWNsZUFwaSBmcm9tICJhcGkvYXJ0aWNsZSI7CmltcG9ydCB0b3BpY0FwaSBmcm9tICJhcGkvdG9waWMiOwppbXBvcnQgaG9tZVNlY3Rpb25BcGkgZnJvbSAiYXBpL2hvbWVTZWN0aW9uIjsKaW1wb3J0IHVzZXJBcGkgZnJvbSAiYXBpL3VzZXIiOwppbXBvcnQgXyBmcm9tICJsb2Rhc2giOwpleHBvcnQgdmFyIHNldEZ1bGxTY3JlZW5Mb2FkaW5nID0gZnVuY3Rpb24gc2V0RnVsbFNjcmVlbkxvYWRpbmcoX3JlZiwgdmFsdWUpIHsKICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgY29tbWl0KHR5cGVzLlNFVF9GVUxMU0NSRUVOX0xPQURJTkcsIHZhbHVlKTsKfTsKZXhwb3J0IHZhciBzZXRVc2VyID0gZnVuY3Rpb24gc2V0VXNlcihfcmVmMiwgdmFsdWUpIHsKICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogIGNvbW1pdCh0eXBlcy5TRVRfVVNFUiwgdmFsdWUpOwogIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiZ2F0dW5Vc2VySWQiLCB2YWx1ZS51c2VySWQpOwp9OwpleHBvcnQgdmFyIGFkZFByb3VkY3RUb0NhcnQgPSBmdW5jdGlvbiBhZGRQcm91ZGN0VG9DYXJ0KF9yZWYzLCBwcm9kdWN0KSB7CiAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgc3RhdGUgPSBfcmVmMy5zdGF0ZTsKCiAgdmFyIGxpc3QgPSBfLmNsb25lRGVlcChzdGF0ZS5zaG9wcGluZ0NhcnQpOwoKICB2YXIgbWF0Y2hlZFByb2R1Y3QgPSBsaXN0LmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBpdGVtLnByb2R1Y3RJZCA9PSBwcm9kdWN0LnByb2R1Y3RJZCAmJiBpdGVtLm9wdGlvbiA9PSBwcm9kdWN0Lm9wdGlvbjsKICB9KTsKCiAgaWYgKG1hdGNoZWRQcm9kdWN0KSB7CiAgICBtYXRjaGVkUHJvZHVjdC5hbW91bnQgKz0gcHJvZHVjdC5hbW91bnQ7CiAgfSBlbHNlIHsKICAgIGxpc3QucHVzaChwcm9kdWN0KTsKICB9CgogIGNvbW1pdCh0eXBlcy5TRVRfU0hPUFBJTkdfQ0FSVCwgbGlzdCk7Cn07CmV4cG9ydCB2YXIgZGVsZXRlUHJvdWRjdEZyb21DYXJ0ID0gZnVuY3Rpb24gZGVsZXRlUHJvdWRjdEZyb21DYXJ0KF9yZWY0LCBwcm9kdWN0SWQpIHsKICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0LAogICAgICBzdGF0ZSA9IF9yZWY0LnN0YXRlOwoKICB2YXIgbGlzdCA9IF90b0NvbnN1bWFibGVBcnJheShzdGF0ZS5zaG9wcGluZ0NhcnQpOwoKICB2YXIgaW5kZXggPSBsaXN0LmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgaXRlbS5pZCA9PT0gcHJvZHVjdElkOwogIH0pOwogIGxpc3Quc3BsaWNlKGluZGV4LCAxKTsKICBjb21taXQodHlwZXMuU0VUX1NIT1BQSU5HX0NBUlQsIGxpc3QpOwp9OwpleHBvcnQgdmFyIGNsZWFyQ2FydCA9IGZ1bmN0aW9uIGNsZWFyQ2FydChfcmVmNSkgewogIHZhciBjb21taXQgPSBfcmVmNS5jb21taXQ7CiAgY29tbWl0KHR5cGVzLlNFVF9TSE9QUElOR19DQVJULCBbXSk7Cn07CmV4cG9ydCB2YXIgbG9nb3V0ID0gZnVuY3Rpb24gbG9nb3V0KF9yZWY2KSB7CiAgdmFyIGNvbW1pdCA9IF9yZWY2LmNvbW1pdDsKICBjb21taXQodHlwZXMuU0VUX1VTRVIsIG51bGwpOwogIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiZ2F0dW5Vc2VySWQiKTsKfTsKZXhwb3J0IHZhciBnZXRQcm9kdWN0TGlzdCA9IGZ1bmN0aW9uIGdldFByb2R1Y3RMaXN0KF9yZWY3KSB7CiAgdmFyIGNvbW1pdCA9IF9yZWY3LmNvbW1pdDsKICByZXR1cm4gcHJvZHVjdEFwaS5nZXRQcm9kdWN0TGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlczEpIHsKICAgIHByb2R1Y3RDYXRlZ29yeUFwaS5nZXRQcm9kdWN0Q2F0ZWdvcnlMaXN0KCkudGhlbihmdW5jdGlvbiAocmVzMikgewogICAgICBjb21taXQodHlwZXMuU0VUX1BST0RVQ1RfTElTVCwgcmVzMS5kYXRhKTsKICAgICAgY29tbWl0KHR5cGVzLlNFVF9QUk9EVUNUX0NBVEVHT1JZX0xJU1QsIHJlczIuZGF0YSk7CiAgICB9KTsKICB9KTsKfTsKZXhwb3J0IHZhciBnZXRBcnRpY2xlTGlzdCA9IGZ1bmN0aW9uIGdldEFydGljbGVMaXN0KF9yZWY4KSB7CiAgdmFyIGNvbW1pdCA9IF9yZWY4LmNvbW1pdDsKICByZXR1cm4gYXJ0aWNsZUFwaS5nZXRBcnRpY2xlTGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgY29tbWl0KHR5cGVzLlNFVF9BUlRJQ0xFX0xJU1QsIHJlcy5kYXRhKTsKICB9KTsKfTsKZXhwb3J0IHZhciBnZXRUb3BpY0xpc3QgPSBmdW5jdGlvbiBnZXRUb3BpY0xpc3QoX3JlZjkpIHsKICB2YXIgY29tbWl0ID0gX3JlZjkuY29tbWl0OwogIHJldHVybiB0b3BpY0FwaS5nZXRUb3BpY0xpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXMxKSB7CiAgICB0b3BpY0NhdGVnb3J5QXBpLmdldFRvcGljQ2F0ZWdvcnlMaXN0KCkudGhlbihmdW5jdGlvbiAocmVzMikgewogICAgICBjb21taXQodHlwZXMuU0VUX1RPUElDX0xJU1QsIHJlczEuZGF0YSk7CiAgICAgIGNvbW1pdCh0eXBlcy5TRVRfVE9QSUNfQ0FURUdPUllfTElTVCwgcmVzMi5kYXRhKTsKICAgIH0pOwogIH0pOwp9OwpleHBvcnQgdmFyIGdldENhdGVnb3J5TGlzdCA9IGZ1bmN0aW9uIGdldENhdGVnb3J5TGlzdChfcmVmMTApIHsKICB2YXIgY29tbWl0ID0gX3JlZjEwLmNvbW1pdDsKICByZXR1cm4gY2F0ZWdvcnlBcGkuZ2V0Q2F0ZWdvcnlMaXN0KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICBjb21taXQodHlwZXMuU0VUX0NBVEVHT1JZX0xJU1QsIHJlcy5kYXRhKTsKICB9KTsKfTsKZXhwb3J0IHZhciBnZXRIb21lU2VjdGlvbkxpc3QgPSBmdW5jdGlvbiBnZXRIb21lU2VjdGlvbkxpc3QoX3JlZjExKSB7CiAgdmFyIGNvbW1pdCA9IF9yZWYxMS5jb21taXQ7CiAgcmV0dXJuIGhvbWVTZWN0aW9uQXBpLmdldFNlY3Rpb25MaXN0KCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICBjb21taXQodHlwZXMuU0VUX0hPTUVfU0VDVElPTl9MSVNULCByZXMuZGF0YSk7CiAgfSk7Cn07IC8vIOWQr+WKqOaSreaUvuWZqAoKZXhwb3J0IHZhciBpbml0U2l0ZSA9IGZ1bmN0aW9uIGluaXRTaXRlKF9yZWYxMikgewogIHZhciBkaXNwYXRjaCA9IF9yZWYxMi5kaXNwYXRjaDsKICBkaXNwYXRjaCgiZ2V0UHJvZHVjdExpc3QiKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBkaXNwYXRjaCgiZ2V0Q2F0ZWdvcnlMaXN0Iik7CiAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gZGlzcGF0Y2goImdldEFydGljbGVMaXN0Iik7CiAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gZGlzcGF0Y2goImdldFRvcGljTGlzdCIpOwogIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGRpc3BhdGNoKCJnZXRIb21lU2VjdGlvbkxpc3QiKTsKICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgIHZhciB1c2VySWQgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oImdhdHVuVXNlcklkIik7CgogICAgaWYgKHVzZXJJZCkgewogICAgICB1c2VyQXBpLmdldFVzZXJCeUlkKHVzZXJJZCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICBkaXNwYXRjaCgic2V0VXNlciIsIHJlcy51c2VyKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0pOwp9Ow=="},{"version":3,"sources":["/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/store/actions.js"],"names":["types","categoryApi","productApi","productCategoryApi","topicCategoryApi","articleApi","topicApi","homeSectionApi","userApi","_","setFullScreenLoading","value","commit","SET_FULLSCREEN_LOADING","setUser","SET_USER","window","localStorage","setItem","userId","addProudctToCart","product","state","list","cloneDeep","shoppingCart","matchedProduct","find","item","productId","option","amount","push","SET_SHOPPING_CART","deleteProudctFromCart","index","findIndex","id","splice","clearCart","logout","removeItem","getProductList","then","res1","getProductCategoryList","res2","SET_PRODUCT_LIST","data","SET_PRODUCT_CATEGORY_LIST","getArticleList","res","SET_ARTICLE_LIST","getTopicList","getTopicCategoryList","SET_TOPIC_LIST","SET_TOPIC_CATEGORY_LIST","getCategoryList","SET_CATEGORY_LIST","getHomeSectionList","getSectionList","SET_HOME_SECTION_LIST","initSite","dispatch","getItem","getUserById","success","user"],"mappings":"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","sourcesContent":["import * as types from \"./mutation-type\";\n\nimport categoryApi from \"api/category\";\nimport productApi from \"api/product\";\nimport productCategoryApi from \"api/productCategory\";\nimport topicCategoryApi from \"api/topicCategory\";\nimport articleApi from \"api/article\";\nimport topicApi from \"api/topic\";\nimport homeSectionApi from \"api/homeSection\";\nimport userApi from \"api/user\";\nimport _ from \"lodash\";\n\nexport const setFullScreenLoading = function({ commit }, value) {\n    commit(types.SET_FULLSCREEN_LOADING, value);\n};\n\nexport const setUser = function({ commit }, value) {\n    commit(types.SET_USER, value);\n    window.localStorage.setItem(\"gatunUserId\", value.userId);\n};\n\nexport const addProudctToCart = function({ commit, state }, product) {\n    const list = _.cloneDeep(state.shoppingCart);\n    const matchedProduct = list.find(item => {\n        return item.productId == product.productId && item.option == product.option;\n    });\n\n    if (matchedProduct) {\n        matchedProduct.amount += product.amount;\n    } else {\n        list.push(product);\n    }\n\n    commit(types.SET_SHOPPING_CART, list);\n};\n\nexport const deleteProudctFromCart = function({ commit, state }, productId) {\n    const list = [...state.shoppingCart];\n    const index = list.findIndex(item => {\n        item.id === productId;\n    });\n\n    list.splice(index, 1);\n    commit(types.SET_SHOPPING_CART, list);\n};\n\nexport const clearCart = function({ commit }) {\n    commit(types.SET_SHOPPING_CART, []);\n};\n\nexport const logout = function({ commit }) {\n    commit(types.SET_USER, null);\n    window.localStorage.removeItem(\"gatunUserId\");\n};\n\nexport const getProductList = function({ commit }) {\n    return productApi.getProductList().then(res1 => {\n        productCategoryApi.getProductCategoryList().then(res2 => {\n            commit(types.SET_PRODUCT_LIST, res1.data);\n            commit(types.SET_PRODUCT_CATEGORY_LIST, res2.data);\n        });\n    });\n};\n\nexport const getArticleList = function({ commit }) {\n    return articleApi.getArticleList().then(res => {\n        commit(types.SET_ARTICLE_LIST, res.data);\n    });\n};\n\nexport const getTopicList = function({ commit }) {\n    return topicApi.getTopicList().then(res1 => {\n        topicCategoryApi.getTopicCategoryList().then(res2 => {\n            commit(types.SET_TOPIC_LIST, res1.data);\n            commit(types.SET_TOPIC_CATEGORY_LIST, res2.data);\n        });\n    });\n};\n\nexport const getCategoryList = function({ commit }) {\n    return categoryApi.getCategoryList().then(res => {\n        commit(types.SET_CATEGORY_LIST, res.data);\n    });\n};\n\nexport const getHomeSectionList = function({ commit }) {\n    return homeSectionApi.getSectionList().then(res => {\n        commit(types.SET_HOME_SECTION_LIST, res.data);\n    });\n};\n\n// 启动播放器\nexport const initSite = function({ dispatch }) {\n    dispatch(\"getProductList\")\n        .then(() => {\n            return dispatch(\"getCategoryList\");\n        })\n        .then(() => {\n            return dispatch(\"getArticleList\");\n        })\n        .then(() => {\n            return dispatch(\"getTopicList\");\n        })\n        .then(() => {\n            return dispatch(\"getHomeSectionList\");\n        })\n        .then(() => {\n            const userId = window.localStorage.getItem(\"gatunUserId\");\n            if (userId) {\n                userApi.getUserById(userId).then(res => {\n                    if (res.success) {\n                        dispatch(\"setUser\", res.user);\n                    }\n                });\n            }\n        });\n};"]}]}