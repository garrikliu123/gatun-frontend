{"remainingRequest":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/thread-loader/dist/cjs.js!/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/babel-loader/lib/index.js!/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/views/Login/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/views/Login/index.vue","mtime":1587649283127},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3hpYW5nbGl1L0RldmVsb3BtZW50L1Byb2plY3RzL3h4eC9hcGVyYS1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAidXVpZCI7CmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHVzZXJBcGkgZnJvbSAiYXBpL3VzZXIiOwppbXBvcnQgeyB2YWxpZGF0ZVBhc3N3b3JkLCB2YWxpZGF0ZUVtYWlsLCB2YWxpZGF0ZU5hbWUgfSBmcm9tICJjb21tb24vdXRpbHMvdmFsaWRhdGVSdWxlcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgbW9kZTogewogICAgICBkZWZhdWx0OiAibG9naW4iCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmVtZW1iZXI6IGZhbHNlLAogICAgICBmb3JtRGF0YTogewogICAgICAgIHVzZXJGaXJzdE5hbWU6ICIiLAogICAgICAgIHVzZXJMYXN0TmFtZTogIiIsCiAgICAgICAgdXNlckVtYWlsOiAiIiwKICAgICAgICB1c2VyUGFzc3dvcmQ6ICIiCiAgICAgIH0sCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBmb3JtUnVsZXM6IHsKICAgICAgICB1c2VyRmlyc3ROYW1lOiBbewogICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZU5hbWUsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICB1c2VyTGFzdE5hbWU6IFt7CiAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkYXRlTmFtZSwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIHVzZXJFbWFpbDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIlBsZWFzZSBlbnRlciBhIHZhbGlkIGVtYWlsIiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH0sIHsKICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVFbWFpbCwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIHVzZXJQYXNzd29yZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIlBsZWFzZSBlbnRlciBhIHZhbGlkIHBhc3N3b3JkIiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH0sIHsKICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVQYXNzd29yZCwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIGZvcm1MYWJlbFdpZHRoOiAiMTAwcHgiCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoWyJpc1Bob25lU2l6ZSJdKSksCiAgbWV0aG9kczogX29iamVjdFNwcmVhZCh7CiAgICBvblN1Ym1pdENsaWNrOiBmdW5jdGlvbiBvblN1Ym1pdENsaWNrKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kcmVmcy5lZGl0TG9naW5Gb3JtLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdXNlckFwaS5sb2dpbihfdGhpcy5mb3JtRGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKCiAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJMb2dpbiBTdWNjZXNzIiwKICAgICAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBfdGhpcy5zZXRVc2VyKHJlcy51c2VyKTsKCiAgICAgICAgICAgICAgX3RoaXMuZ2V0T3JkZXJIaXN0b3J5KHJlcy51c2VyLnVzZXJJZCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXMuZm9ybURhdGEgPSB7CiAgICAgICAgICAgICAgICB1c2VyRW1haWw6ICIiLAogICAgICAgICAgICAgICAgdXNlclBhc3N3b3JkOiAiIgogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgb25SZWdpc3RlckNsaWNrOiBmdW5jdGlvbiBvblJlZ2lzdGVyQ2xpY2soKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy4kcmVmcy5lZGl0TG9naW5Gb3JtLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgX3RoaXMyLmZvcm1EYXRhLnVzZXJJZCA9IHV1aWR2NCgpOwogICAgICAgICAgdXNlckFwaS5hZGRVc2VyKF90aGlzMi5mb3JtRGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIF90aGlzMi5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CgogICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgbWVzc2FnZTogIlJlZ2lzdGVyIFN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgbWFwQWN0aW9ucyhbInNldFVzZXIiLCAiZ2V0T3JkZXJIaXN0b3J5Il0pKQp9Ow=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <el-dialog\n    class=\"ap-dialog\"\n    :title=\"mode == 'login' ? 'Log In' : 'Register'\"\n    :visible.sync=\"dialogVisible\"\n    :width=\"isPhoneSize ? '100%' : '1100px'\"\n  >\n    <div class=\"dialog-inner\">\n      <el-form :model=\"formData\" :rules=\"formRules\" ref=\"editLoginForm\">\n        <template v-if=\"mode == 'login'\">\n          <!-- Name -->\n          <el-form-item label=\"Email\" :label-width=\"formLabelWidth\" prop=\"userEmail\">\n            <el-input v-model=\"formData.userEmail\" placeholder=\"Please enter email\"></el-input>\n          </el-form-item>\n\n          <!-- Password -->\n          <el-form-item label=\"Password\" :label-width=\"formLabelWidth\" prop=\"userPassword\">\n            <el-input\n              v-model=\"formData.userPassword\"\n              show-password\n              placeholder=\"Please enter password\"\n            ></el-input>\n          </el-form-item>\n        </template>\n        <template v-else>\n          <!-- Name -->\n          <el-form-item label=\"First Name\" :label-width=\"formLabelWidth\" prop=\"userFirstName\">\n            <el-input\n              v-model=\"formData.userFirstName\"\n              placeholder=\"Please enter first name\"\n            ></el-input>\n          </el-form-item>\n\n          <el-form-item label=\"Last Name\" :label-width=\"formLabelWidth\" prop=\"userLastName\">\n            <el-input\n              v-model=\"formData.userLastName\"\n              placeholder=\"Please enter last name\"\n            ></el-input>\n          </el-form-item>\n\n          <!-- Email -->\n          <el-form-item label=\"Email\" :label-width=\"formLabelWidth\" prop=\"userEmail\">\n            <el-input v-model=\"formData.userEmail\" placeholder=\"Please enter email\"></el-input>\n          </el-form-item>\n\n          <!-- Password -->\n          <el-form-item label=\"Password\" :label-width=\"formLabelWidth\" prop=\"userPassword\">\n            <el-input\n              v-model=\"formData.userPassword\"\n              show-password\n              placeholder=\"Please enter password\"\n            ></el-input>\n          </el-form-item>\n        </template>\n      </el-form>\n    </div>\n\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"dialogVisible = false\">Cancel</el-button>\n      <el-button v-if=\"mode == 'login'\" type=\"primary\" @click=\"onSubmitClick\">Log In</el-button>\n      <el-button v-else type=\"primary\" @click=\"onRegisterClick\">Register</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { mapActions } from \"vuex\";\nimport userApi from \"api/user\";\nimport { validatePassword, validateEmail, validateName } from \"common/utils/validateRules\";\nexport default {\n  props: {\n    mode: {\n      default: \"login\"\n    }\n  },\n  data() {\n    return {\n      remember: false,\n      formData: {\n        userFirstName: \"\",\n        userLastName: \"\",\n        userEmail: \"\",\n        userPassword: \"\"\n      },\n      dialogVisible: false,\n      formRules: {\n        userFirstName: [\n          {\n            validator: validateName,\n            trigger: \"blur\"\n          }\n        ],\n        userLastName: [\n          {\n            validator: validateName,\n            trigger: \"blur\"\n          }\n        ],\n        userEmail: [\n          {\n            required: true,\n            message: \"Please enter a valid email\",\n            trigger: \"blur\"\n          },\n          {\n            validator: validateEmail,\n            trigger: \"blur\"\n          }\n        ],\n        userPassword: [\n          {\n            required: true,\n            message: \"Please enter a valid password\",\n            trigger: \"blur\"\n          },\n          {\n            validator: validatePassword,\n            trigger: \"blur\"\n          }\n        ]\n      },\n      formLabelWidth: \"100px\"\n    };\n  },\n\n  computed: {\n    ...mapGetters([\"isPhoneSize\"])\n  },\n\n  methods: {\n    onSubmitClick() {\n      this.$refs.editLoginForm.validate(valid => {\n        if (valid) {\n          userApi.login(this.formData).then(res => {\n            this.dialogVisible = false;\n            if (res.success) {\n              this.$message({\n                type: \"success\",\n                message: \"Login Success\",\n                showClose: true\n              });\n              this.setUser(res.user);\n              this.getOrderHistory(res.user.userId);\n            } else {\n              this.formData = {\n                userEmail: \"\",\n                userPassword: \"\"\n              };\n            }\n          });\n        }\n      });\n    },\n\n    onRegisterClick() {\n      this.$refs.editLoginForm.validate(valid => {\n        if (valid) {\n          this.formData.userId = uuidv4();\n          userApi.addUser(this.formData).then(res => {\n            this.dialogVisible = false;\n            if (res.success) {\n              this.$message({\n                type: \"success\",\n                message: \"Register Success\",\n                showClose: true\n              });\n            }\n          });\n        }\n      });\n    },\n\n    ...mapActions([\"setUser\", \"getOrderHistory\"])\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.ap-dialog {\n  margin: 0 5px;\n  overflow-x: visible;\n  .dialog-inner {\n    max-height: 60vh;\n    overflow-x: visible;\n    overflow-y: auto;\n    padding: 0 20px;\n  }\n\n  .form-item-right {\n    display: flex;\n    justify-content: flex-end;\n  }\n}\n</style>\n"],"sourceRoot":"src/views/Login"}]}