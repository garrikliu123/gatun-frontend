{"remainingRequest":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/babel-loader/lib/index.js!/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/views/Manage/AddProductDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/views/Manage/AddProductDialog.vue","mtime":1585430812525},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAidXVpZCI7CmltcG9ydCB7IHVwbG9hZEltYWdlIH0gZnJvbSAiYXBpL2NvbW1vbiI7CmltcG9ydCBUZXh0RWRpdG9yIGZyb20gImNvbXBvbmVudHMvVGV4dEVkaXRvciI7CmltcG9ydCB7IGNoZWNrRG91YmxlIH0gZnJvbSAiY29tbW9uL3V0aWxzL3ZhbGlkYXRlUnVsZXMiOwppbXBvcnQgeyBlZGl0UHJvZHVjdEZvcm0gYXMgdGVzdEZvcm1EYXRhIH0gZnJvbSAiY29tbW9uL2NvbmZpZy90ZXN0RGF0YSI7IC8vIGltcG9ydCBTWVNfQ09ORklHIGZyb20gImNvbW1vbi9jb25maWciOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyBzeXNDb25maWc6IFNZU19DT05GSUcsCiAgICAgIGFjdGl2ZVRhYk5hbWU6ICIxIiwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGZvcm1EYXRhOiB7CiAgICAgICAgcHJvZHVjdE5hbWU6ICIiLAogICAgICAgIHByb2R1Y3REZXNjOiAiIiwKICAgICAgICBwcm9kdWN0U3BlY3M6ICIiLAogICAgICAgIHByb2R1Y3RXYXJyYW50OiAiIiwKICAgICAgICBwcm9kdWN0VmlkZW86ICIiLAogICAgICAgIHByb2R1Y3RGZWF0dXJlOiAiIiwKICAgICAgICBwcm9kdWN0UHJpY2U6ICIiLAogICAgICAgIHByb2R1Y3RDYXRlZ29yeTogW10sCiAgICAgICAgcHJvZHVjdEFwcGxpY2F0aW9uOiBbXSwKICAgICAgICBwcm9kdWN0UGFyYW1ldGVyOiBbXQogICAgICB9LAogICAgICBmb3JtUnVsZXM6IHsKICAgICAgICBwcm9kdWN0TmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIlBsZWFzZSBlbnRlciBhIHZhbGlkIG5hbWUiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgcHJvZHVjdFByaWNlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAiUGxlYXNlIGVudGVyIGEgdmFsaWQgcHJpY2UiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfSwgewogICAgICAgICAgdmFsaWRhdG9yOiBjaGVja0RvdWJsZSgiUGxlYXNlIGVudGVyIGEgdmFsaWQgbnVtYmVyIHdpdGggdHdvIGRlY2ltYWwgcGxhY2VzIiksCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XQogICAgICB9LAogICAgICBmb3JtTGFiZWxXaWR0aDogIjEwMHB4IiwKICAgICAgdGVzdEZvcm1EYXRhOiB0ZXN0Rm9ybURhdGEsCiAgICAgIHVwbG9hZEltYWdlRXJyb3I6IG51bGwKICAgIH07CiAgfSwKICB3YXRjaDoge30sCiAgbWV0aG9kczogewogICAgb25TdWJtaXRDbGljazogZnVuY3Rpb24gb25TdWJtaXRDbGljaygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnMuZWRpdFByb2R1Y3RGb3JtLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGNvbnNvbGUubG9nKHZhbGlkKTsKCiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5mb3JtRGF0YSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG9uVXBsb2FkSW1hZ2U6IGZ1bmN0aW9uIG9uVXBsb2FkSW1hZ2UocmVxKSB7CiAgICAgIHZhciBmaWxldHlwZSA9ICIiOwoKICAgICAgaWYgKHJlcS5maWxlLnR5cGUgPT09ICJpbWFnZS9wbmciKSB7CiAgICAgICAgZmlsZXR5cGUgPSAicG5nIjsKICAgICAgfSBlbHNlIHsKICAgICAgICBmaWxldHlwZSA9ICJqcGciOwogICAgICB9IC8vIOmHjeWRveWQjeimgeS4iuS8oOeahOaWh+S7tgoKCiAgICAgIHZhciBrZXluYW1lID0gIiIgKyBuZXcgRGF0ZSgpICsgdXVpZHY0KCkgKyAiLiIgKyBmaWxldHlwZTsKICAgICAgdXBsb2FkSW1hZ2UoewogICAgICAgIGZpbGU6IHJlcS5maWxlLAogICAgICAgIGtleToga2V5bmFtZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDpqozor4Hmlofku7blkIjms5XmgKcKICAgIGJlZm9yZVVwbG9hZDogZnVuY3Rpb24gYmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgdmFyIGlzSlBHID0gZmlsZS50eXBlID09PSAiaW1hZ2UvanBlZyIgfHwgZmlsZS50eXBlID09PSAiaW1hZ2UvcG5nIjsKICAgICAgdmFyIGlzTHQyTSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgNTsKCiAgICAgIGlmICghaXNKUEcpIHsKICAgICAgICB0aGlzLnVwbG9hZEltYWdlRXJyb3IgPSAiSW1hZ2UgdHlwZSBzaG91bGQgYmUgSlBFRCBvciBQTkciOwogICAgICB9CgogICAgICBpZiAoIWlzTHQyTSkgewogICAgICAgIHRoaXMudXBsb2FkSW1hZ2VFcnJvciA9ICJJbWFnZSBzaXplIHNob3VsZCBsZXNzIHRoYW4gNU1CIjsKICAgICAgfQoKICAgICAgY29uc29sZS5sb2codGhpcy51cGxvYWRJbWFnZUVycm9yKTsKICAgICAgcmV0dXJuIGlzSlBHICYmIGlzTHQyTTsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgICJhcC10ZXh0ZWRpdG9yIjogVGV4dEVkaXRvcgogIH0KfTs="},{"version":3,"sources":["AddProductDialog.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <el-dialog class=\"ap-dialog\" title=\"Edit Product\" :visible.sync=\"dialogVisible\" width=\"1100px\">\n    <div class=\"dialog-inner\">\n      <el-form :model=\"formData\" :rules=\"formRules\" ref=\"editProductForm\">\n        <!-- Name -->\n        <el-form-item label=\"Name\" :label-width=\"formLabelWidth\" prop=\"productName\">\n          <el-input v-model=\"formData.productName\"></el-input>\n        </el-form-item>\n\n        <!-- Price -->\n        <el-form-item label=\"Price\" :label-width=\"formLabelWidth\" prop=\"productPrice\">\n          <el-input v-model=\"formData.productPrice\"></el-input>\n        </el-form-item>\n\n        <!-- Parameter -->\n        <el-form-item label=\"Parameter\" :label-width=\"formLabelWidth\">\n          <el-select class=\"form-item\" v-model=\"formData.productParameter\" multiple>\n            <el-option\n              v-for=\"item in testFormData.parameterList\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n\n        <!-- Category -->\n        <el-form-item label=\"Category\" :label-width=\"formLabelWidth\">\n          <el-select class=\"form-item\" v-model=\"formData.productCategory\" multiple>\n            <el-option\n              v-for=\"item in testFormData.categoryList\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n\n        <!-- Application -->\n        <el-form-item label=\"Application\" :label-width=\"formLabelWidth\">\n          <el-select class=\"form-item\" v-model=\"formData.productApplication\" multiple>\n            <el-option\n              v-for=\"item in testFormData.applicationList\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n\n      <!-- Pictures -->\n      <el-upload\n        class=\"dialog-picture-upload\"\n        action=\"\"\n        :http-request=\"onUploadImage\"\n        :before-upload=\"beforeUpload\"\n        list-type=\"picture-card\"\n      >\n        <i class=\"el-icon-plus\"></i>\n      </el-upload>\n\n      <!-- Rich Text Enter -->\n      <el-tabs class=\"dialog-tabs\" v-model=\"activeTabName\">\n        <!-- Description -->\n        <el-tab-pane label=\"Description\" name=\"1\">\n          <ap-texteditor v-model=\"formData.productDesc\" />\n        </el-tab-pane>\n\n        <!-- Feature -->\n        <el-tab-pane label=\"Feature\" name=\"2\">\n          <ap-texteditor v-model=\"formData.productFeature\" />\n        </el-tab-pane>\n\n        <!-- Speces -->\n        <el-tab-pane label=\"Specs\" name=\"3\">\n          <ap-texteditor v-model=\"formData.productSpecs\" />\n        </el-tab-pane>\n\n        <!-- Video -->\n        <el-tab-pane label=\"Video\" name=\"4\">\n          <ap-texteditor v-model=\"formData.productVideo\" />\n        </el-tab-pane>\n\n        <!-- Warrant -->\n        <el-tab-pane label=\"Warrant\" name=\"5\">\n          <ap-texteditor v-model=\"formData.productWarrant\" />\n        </el-tab-pane>\n      </el-tabs>\n    </div>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"dialogVisible = false\">Cancel</el-button>\n      <el-button type=\"primary\" @click=\"onSubmitClick\">Submit</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { v4 as uuidv4 } from \"uuid\";\nimport { uploadImage } from \"api/common\";\nimport TextEditor from \"components/TextEditor\";\nimport { checkDouble } from \"common/utils/validateRules\";\nimport { editProductForm as testFormData } from \"common/config/testData\";\n// import SYS_CONFIG from \"common/config\";\n\nexport default {\n  data() {\n    return {\n      // sysConfig: SYS_CONFIG,\n      activeTabName: \"1\",\n      dialogVisible: false,\n      formData: {\n        productName: \"\",\n        productDesc: \"\",\n        productSpecs: \"\",\n        productWarrant: \"\",\n        productVideo: \"\",\n        productFeature: \"\",\n        productPrice: \"\",\n        productCategory: [],\n        productApplication: [],\n        productParameter: []\n      },\n      formRules: {\n        productName: [{ required: true, message: \"Please enter a valid name\", trigger: \"blur\" }],\n        productPrice: [\n          { required: true, message: \"Please enter a valid price\", trigger: \"blur\" },\n          {\n            validator: checkDouble(\"Please enter a valid number with two decimal places\"),\n            trigger: \"blur\"\n          }\n        ]\n      },\n      formLabelWidth: \"100px\",\n      testFormData: testFormData,\n      uploadImageError: null\n    };\n  },\n\n  watch: {},\n\n  methods: {\n    onSubmitClick() {\n      this.$refs.editProductForm.validate(valid => {\n        console.log(valid);\n\n        if (valid) {\n          console.log(this.formData);\n        } else {\n          return false;\n        }\n      });\n    },\n\n    onUploadImage(req) {\n      let filetype = \"\";\n      if (req.file.type === \"image/png\") {\n        filetype = \"png\";\n      } else {\n        filetype = \"jpg\";\n      }\n\n      // 重命名要上传的文件\n      const keyname = \"\" + new Date() + uuidv4() + \".\" + filetype;\n\n      uploadImage({\n        file: req.file,\n        key: keyname\n      }).then(res => {\n        console.log(res);\n      });\n    },\n\n    // 验证文件合法性\n    beforeUpload(file) {\n      const isJPG = file.type === \"image/jpeg\" || file.type === \"image/png\";\n      const isLt2M = file.size / 1024 / 1024 < 5;\n\n      if (!isJPG) {\n        this.uploadImageError = \"Image type should be JPED or PNG\";\n      }\n\n      if (!isLt2M) {\n        this.uploadImageError = \"Image size should less than 5MB\";\n      }\n\n      console.log(this.uploadImageError);\n\n      return isJPG && isLt2M;\n    }\n  },\n\n  components: {\n    \"ap-texteditor\": TextEditor\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.ap-dialog {\n  overflow-x: visible;\n  .dialog-inner {\n    max-height: 60vh;\n    overflow-x: visible;\n    overflow-y: auto;\n    padding: 0 20px;\n  }\n\n  .dialog-picture-upload {\n    width: 100%;\n    display: flex;\n    justify-content: flex-start;\n    margin: 10px 0;\n  }\n\n  .form-item {\n    width: 100%;\n  }\n}\n</style>\n"],"sourceRoot":"src/views/Manage"}]}