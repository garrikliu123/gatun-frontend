{"remainingRequest":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/babel-loader/lib/index.js!/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/components/Cart/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/components/Cart/index.vue","mtime":1587433325426},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy94aWFuZ2xpdS9EZXZlbG9wbWVudC9Qcm9qZWN0cy94eHgvYXBlcmEtZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMveGlhbmdsaXUvRGV2ZWxvcG1lbnQvUHJvamVjdHMveHh4L2FwZXJhLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbG9hZFN0cmlwZSB9IGZyb20gIkBzdHJpcGUvc3RyaXBlLWpzIjsKaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgY2hlY2tvdXRBcGkgZnJvbSAiYXBpL2NoZWNrb3V0IjsKaW1wb3J0IF8gZnJvbSAibG9kYXNoIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwcm9kdWN0TGlzdDogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7CiAgICBtYXRjaGVkUHJvZHVjdDogZnVuY3Rpb24gbWF0Y2hlZFByb2R1Y3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgbGlzdCA9IFtdOwogICAgICB0aGlzLnNob3BwaW5nQ2FydC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgdmFyIHByb2R1Y3QgPSBfdGhpcy5wcm9kdWN0TGlzdE9ialtpdGVtLnByb2R1Y3RJZF07CiAgICAgICAgdmFyIGltYWdlTGlzdCA9IEpTT04ucGFyc2UocHJvZHVjdC5wcm9kdWN0SW1hZ2VzKTsKICAgICAgICB2YXIgcHJvZHVjdE9wdGlvbkxpc3QgPSBKU09OLnBhcnNlKHByb2R1Y3QucHJvZHVjdE9wdGlvbnMpOwogICAgICAgIHZhciBvcHRpb25zID0gW107CgogICAgICAgIGlmIChwcm9kdWN0T3B0aW9uTGlzdCkgewogICAgICAgICAgcHJvZHVjdE9wdGlvbkxpc3QuZm9yRWFjaChmdW5jdGlvbiAobykgewogICAgICAgICAgICBvcHRpb25zLnB1c2goewogICAgICAgICAgICAgIGxhYmVsOiBvLAogICAgICAgICAgICAgIHZhbHVlOiBvCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBsaXN0LnB1c2goewogICAgICAgICAgcHJvZHVjdElkOiBpdGVtLnByb2R1Y3RJZCwKICAgICAgICAgIHByb2R1Y3ROYW1lOiBwcm9kdWN0LnByb2R1Y3ROYW1lLAogICAgICAgICAgcHJvZHVjdFByaWNlOiBwcm9kdWN0LnByb2R1Y3RQcmljZSwKICAgICAgICAgIGltYWdlOiBpbWFnZUxpc3RbMF0sCiAgICAgICAgICBhbW91bnQ6IGl0ZW0uYW1vdW50LAogICAgICAgICAgb3B0aW9uOiBpdGVtLm9wdGlvbiwKICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnMKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHJldHVybiBsaXN0OwogICAgfSwKICAgIHRvdGFsUHJpY2U6IGZ1bmN0aW9uIHRvdGFsUHJpY2UoKSB7CiAgICAgIHZhciBwcmljZSA9IDA7CiAgICAgIHRoaXMucHJvZHVjdExpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHByaWNlICs9IGl0ZW0ucHJvZHVjdFByaWNlICogaXRlbS5hbW91bnQ7CiAgICAgIH0pOwogICAgICByZXR1cm4gcHJpY2U7CiAgICB9CiAgfSwgbWFwR2V0dGVycyhbInByb2R1Y3RMaXN0T2JqIiwgInNob3BwaW5nQ2FydCIsICJ1c2VyIl0pKSwKICB3YXRjaDogewogICAgbWF0Y2hlZFByb2R1Y3Q6IHsKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKGxpc3QpIHsKICAgICAgICB0aGlzLnByb2R1Y3RMaXN0ID0gXy5jbG9uZURlZXAobGlzdCk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoewogICAgb25Qcm9kdWN0VGl0bGVDbGljazogZnVuY3Rpb24gb25Qcm9kdWN0VGl0bGVDbGljayhpdGVtKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvcHJvZHVjdC8iICsgaXRlbS5wcm9kdWN0SWQpOwogICAgfSwKICAgIG9uRGVsZXRlQ2xpY2s6IGZ1bmN0aW9uIG9uRGVsZXRlQ2xpY2soaWQpIHsKICAgICAgdmFyIGluZGV4ID0gdGhpcy5wcm9kdWN0TGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5wcm9kdWN0SWQgPT09IGlkOwogICAgICB9KTsKICAgICAgdGhpcy5wcm9kdWN0TGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICAgIG9uQ2hlY2tvdXQ6IGZ1bmN0aW9uIG9uQ2hlY2tvdXQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgcHJvZHVjdEl0ZW1zLCBfeWllbGQkY2hlY2tvdXRBcGkkY3IsIHNlc3Npb24sIHN0cmlwZTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKF90aGlzMi51c2VyKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAiUGxlYXNlIGxvZyBpbiBmaXJzdCEiLAogICAgICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBfdGhpczIub25TYXZlQ2FydENsaWNrKCk7CgogICAgICAgICAgICAgICAgcHJvZHVjdEl0ZW1zID0gX3RoaXMyLnByb2R1Y3RMaXN0Lm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ucHJvZHVjdE5hbWUsCiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICJPcHRpb246ICIgKyBpdGVtLm9wdGlvbiwKICAgICAgICAgICAgICAgICAgICBpbWFnZXM6IFtpdGVtLmltYWdlLnVybF0sCiAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBpdGVtLnByb2R1Y3RQcmljZSAqIDEwMCwKICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeTogImNhZCIsCiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IGl0ZW0uYW1vdW50CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA1OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gY2hlY2tvdXRBcGkuY3JlYXRlU2Vzc2lvbih7CiAgICAgICAgICAgICAgICAgIGl0ZW1zOiBwcm9kdWN0SXRlbXMsCiAgICAgICAgICAgICAgICAgIGN1c3RvbWVyRW1haWw6IF90aGlzMi51c2VyLnVzZXJFbWFpbCwKICAgICAgICAgICAgICAgICAgdXNlcklkOiBfdGhpczIudXNlci51c2VySWQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfeWllbGQkY2hlY2tvdXRBcGkkY3IgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgc2Vzc2lvbiA9IF95aWVsZCRjaGVja291dEFwaSRjci5zZXNzaW9uOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgcmV0dXJuIGxvYWRTdHJpcGUoInBrX3Rlc3RfUTNtcExaZVFyNUVOc1B6RDNHV2ZGc0RBMDBQYmxIM2FzVCIpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgc3RyaXBlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgIHJldHVybiBzdHJpcGUucmVkaXJlY3RUb0NoZWNrb3V0KHsKICAgICAgICAgICAgICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uLmlkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE3OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSg1KTsKCiAgICAgICAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiBfY29udGV4dC50MCwKICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbNSwgMTddXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIG9uU2F2ZUNhcnRDbGljazogZnVuY3Rpb24gb25TYXZlQ2FydENsaWNrKCkgewogICAgICB0aGlzLnNldENhcnQodGhpcy5wcm9kdWN0TGlzdCk7CiAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICBtZXNzYWdlOiAiU2F2ZSBFZGl0IFN1Y2Nlc3MiLAogICAgICAgIHNob3dDbG9zZTogdHJ1ZQogICAgICB9KTsKICAgIH0KICB9LCBtYXBBY3Rpb25zKFsic2V0Q2FydCJdKSkKfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"ap-cart\">\n    <div class=\"item-count-text\">\n      <span>{{ shoppingCart.length }} Item(s) in Your Shopping Cart</span>\n    </div>\n    <el-divider class=\"divider\"></el-divider>\n    <div>\n      <div\n        class=\"product-list\"\n        v-for=\"(item, index) in productList\"\n        :key=\"index\"\n      >\n        <div class=\"product-item\">\n          <el-image\n            style=\"width: 100px; height: 100px\"\n            :src=\"item.image.url\"\n            fit=\"contain\"\n          ></el-image>\n          <div class=\"text-group\">\n            <div class=\"text-link-wrap\">\n              <el-link\n                class=\"text-link\"\n                @click=\"onProductTitleClick(item)\"\n              >{{\n                item.productName\n              }}</el-link>\n            </div>\n            <div class=\"select-group\">\n              <el-input-number\n                size=\"mini\"\n                :min=\"1\"\n                v-model=\"item.amount\"\n              ></el-input-number>\n              <el-select\n                v-if=\"item.options.length > 0\"\n                class=\"option-select\"\n                v-model=\"item.option\"\n                size=\"mini\"\n              >\n                <el-option\n                  v-for=\"o in item.options\"\n                  :key=\"o.value\"\n                  :label=\"o.label\"\n                  :value=\"o.value\"\n                >\n                </el-option>\n              </el-select>\n            </div>\n          </div>\n          <div class=\"right-group\">\n            <div\n              class=\"price\"\n              v-if=\"item.productPrice * item.amount >= 1000\"\n              v-format=\"'$#,##0.00'\"\n            >\n              {{ item.productPrice * item.amount }}\n            </div>\n            <div\n              class=\"price\"\n              v-else\n              v-format=\"'$##0.00'\"\n            >\n              {{ item.productPrice * item.amount }}\n            </div>\n          </div>\n          <i\n            class=\"delete-icon el-icon-error\"\n            @click=\"onDeleteClick(item.productId)\"\n          ></i>\n        </div>\n        <el-divider class=\"divider\"></el-divider>\n      </div>\n      <div\n        class=\"footer-btn-group\"\n        v-if=\"productList.length > 0\"\n      >\n        <span class=\"total-price\">\n          Total:\n          <span\n            v-if=\"totalPrice >= 1000\"\n            v-format=\"'$#,##0.00'\"\n          >\n            {{ totalPrice }}\n          </span>\n          <span\n            v-else\n            v-format=\"'$##0.00'\"\n          >\n            {{ totalPrice }}\n          </span>\n        </span>\n        <div class=\"button-group\">\n          <el-button\n            size=\"small\"\n            @click=\"onSaveCartClick\"\n          >SAVE EDIT</el-button>\n          <el-button\n            size=\"small\"\n            type=\"primary\"\n            @click=\"onCheckout\"\n          >CHECKOUT</el-button>\n        </div>\n      </div>\n    </div>\n\n    <!-- 支付 -->\n  </div>\n</template>\n<script>\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport { mapGetters, mapActions } from \"vuex\";\nimport checkoutApi from \"api/checkout\";\nimport _ from \"lodash\";\nexport default {\n  data() {\n    return {\n      productList: []\n    };\n  },\n\n  computed: {\n    matchedProduct() {\n      const list = [];\n\n      this.shoppingCart.forEach(item => {\n        const product = this.productListObj[item.productId];\n\n        const imageList = JSON.parse(product.productImages);\n        const productOptionList = JSON.parse(product.productOptions);\n        const options = [];\n\n        if (productOptionList) {\n          productOptionList.forEach(o => {\n            options.push({\n              label: o,\n              value: o\n            });\n          });\n        }\n\n        list.push({\n          productId: item.productId,\n          productName: product.productName,\n          productPrice: product.productPrice,\n          image: imageList[0],\n          amount: item.amount,\n          option: item.option,\n          options\n        });\n      });\n      return list;\n    },\n    totalPrice() {\n      let price = 0;\n      this.productList.forEach(item => {\n        price += item.productPrice * item.amount;\n      });\n      return price;\n    },\n    ...mapGetters([\"productListObj\", \"shoppingCart\", \"user\"])\n  },\n\n  watch: {\n    matchedProduct: {\n      immediate: true,\n      handler(list) {\n        this.productList = _.cloneDeep(list);\n      }\n    }\n  },\n\n  methods: {\n    onProductTitleClick(item) {\n      this.$router.push(\"/product/\" + item.productId);\n    },\n\n    onDeleteClick(id) {\n      const index = this.productList.findIndex(item => {\n        return item.productId === id;\n      });\n      this.productList.splice(index, 1);\n    },\n\n    async onCheckout() {\n      if (!this.user) {\n        this.$message({\n          type: \"error\",\n          message: \"Please log in first!\",\n          showClose: true\n        });\n        return;\n      }\n\n      this.onSaveCartClick();\n\n      const productItems = this.productList.map(item => {\n        return {\n          name: item.productName,\n          description: \"Option: \" + item.option,\n          images: [item.image.url],\n          amount: item.productPrice * 100,\n          currency: \"cad\",\n          quantity: item.amount\n        };\n      });\n\n      try {\n        const { session } = await checkoutApi.createSession({\n          items: productItems,\n          customerEmail: this.user.userEmail,\n          userId: this.user.userId\n        });\n\n        const stripe = await loadStripe(\n          \"pk_test_Q3mpLZeQr5ENsPzD3GWfFsDA00PblH3asT\"\n        );\n\n        await stripe.redirectToCheckout({\n          sessionId: session.id\n        });\n      } catch (e) {\n        this.$message({\n          type: \"error\",\n          message: e,\n          showClose: true\n        });\n      }\n    },\n\n    onSaveCartClick() {\n      this.setCart(this.productList);\n      this.$message({\n        type: \"success\",\n        message: \"Save Edit Success\",\n        showClose: true\n      });\n    },\n\n    ...mapActions([\"setCart\"])\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.ap-cart {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n\n  .item-count-text {\n    text-align: center;\n    font-weight: bold;\n  }\n\n  .divider {\n    margin: 5px 0 10px;\n  }\n\n  .product-item {\n    position: relative;\n    display: flex;\n    margin-bottom: 5px;\n    height: 100px;\n  }\n\n  .text-group {\n    flex: 0 0 auto;\n    margin: 0 10px;\n    display: flex;\n    flex-direction: column;\n    width: 300px;\n    .text-link-wrap {\n      display: flex;\n    }\n    .text-link {\n      font-weight: bold;\n      text-align: left;\n      word-break: break-all;\n      overflow: hidden;\n      display: -webkit-box;\n      -webkit-box-orient: vertical;\n      -webkit-line-clamp: 2;\n      margin-bottom: 20px;\n      margin-top: 10px;\n    }\n  }\n\n  .price {\n    font-weight: bold;\n  }\n\n  .delete-icon {\n    position: absolute;\n    font-size: 1.2em;\n    top: 45px;\n    right: 0;\n    cursor: pointer;\n    transition: 200ms;\n  }\n\n  .delete-icon:hover {\n    color: #f56c6c;\n  }\n\n  .select-group {\n    display: flex;\n    .option-select {\n      margin: 0 10px;\n    }\n  }\n\n  .footer-btn-group {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    .total-price {\n      font-size: 1.5em;\n      font-weight: bold;\n    }\n\n    .button-group {\n      display: flex;\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/components/Cart"}]}