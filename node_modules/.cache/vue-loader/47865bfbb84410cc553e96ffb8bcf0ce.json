{"remainingRequest":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/views/Manage/AddCategoryDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/views/Manage/AddCategoryDialog.vue","mtime":1586032491736},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAidXVpZCI7CmltcG9ydCBjYXRlZ29yeUNvbmZpZyBmcm9tICIuL2NvbmZpZy9jYXRlZ29yeV9jb25maWcuanMiOwppbXBvcnQgY2F0ZWdvcnlBcGkgZnJvbSAiYXBpL2NhdGVnb3J5IjsKaW1wb3J0IGNhdGVnb3J5VGFibGVDb25maWcgZnJvbSAiLi9jb25maWcvY2F0ZWdvcnlfdGFibGVfY29uZmlnLmpzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgbW9kZTogewogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHRhcmdldENhdGVnb3J5OiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNhdGVnb3J5VGFibGVDb25maWcsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBmb3JtRGF0YTogewogICAgICAgIGNhdGVnb3J5TmFtZTogIiIsCiAgICAgICAgY2F0ZWdvcnlUeXBlOiBjYXRlZ29yeVRhYmxlQ29uZmlnLnR5cGVPcHRpb25zWzBdLnZhbHVlCiAgICAgIH0sCiAgICAgIGZvcm1SdWxlczogewogICAgICAgIGNhdGVnb3J5TmFtZTogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIlBsZWFzZSBlbnRlciBhIHZhbGlkIG5hbWUiLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIH0sCiAgICAgIGZvcm1MYWJlbFdpZHRoOiAiMTAwcHgiCiAgICB9OwogIH0sCgogIHdhdGNoOiB7CiAgICB0YXJnZXRDYXRlZ29yeShjYXRlZ29yeSkgewogICAgICBpZiAoY2F0ZWdvcnkpIHsKICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuZm9ybURhdGEsIGNhdGVnb3J5KTsKICAgICAgfQogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIG9uU3VibWl0Q2xpY2soKSB7CiAgICAgIHRoaXMuJHJlZnMuZWRpdENhdGVnb3J5Rm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAodGhpcy5tb2RlID09PSBjYXRlZ29yeUNvbmZpZy5NT0RFLk5FVykgewogICAgICAgICAgICBjb25zdCBjYXRlZ29yeUlkID0gdXVpZHY0KCk7CiAgICAgICAgICAgIHRoaXMuZm9ybURhdGEuY2F0ZWdvcnlJZCA9IGNhdGVnb3J5SWQ7CiAgICAgICAgICAgIGNhdGVnb3J5QXBpLmFkZENhdGVnb3J5KHRoaXMuZm9ybURhdGEpLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMuZ2V0Q2F0ZWdvcnlMaXN0KCk7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAiQWRkIENhdGVnb3J5IFN1Y2Nlc3MiCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT09IGNhdGVnb3J5Q29uZmlnLk1PREUuRURJVCkgewogICAgICAgICAgICBjYXRlZ29yeUFwaS51cGRhdGVDYXRlZ29yeSh0aGlzLmZvcm1EYXRhKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICB0aGlzLmdldENhdGVnb3J5TGlzdCgpOwogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgbWVzc2FnZTogIlVwZGF0ZSBDYXRlZ29yeSBTdWNjZXNzIgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICAuLi5tYXBBY3Rpb25zKFsiZ2V0Q2F0ZWdvcnlMaXN0Il0pCiAgfQp9Owo="},{"version":3,"sources":["AddCategoryDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"AddCategoryDialog.vue","sourceRoot":"src/views/Manage","sourcesContent":["<template>\n  <el-dialog\n    class=\"ap-dialog\"\n    title=\"Edit Category\"\n    :visible.sync=\"dialogVisible\"\n    width=\"1100px\"\n  >\n    <div class=\"dialog-inner\">\n      <el-form\n        :model=\"formData\"\n        :rules=\"formRules\"\n        ref=\"editCategoryForm\"\n      >\n        <!-- Name -->\n        <el-form-item\n          label=\"Name\"\n          :label-width=\"formLabelWidth\"\n          prop=\"categoryName\"\n        >\n          <el-input v-model=\"formData.categoryName\"></el-input>\n        </el-form-item>\n\n        <!-- Parameter -->\n        <el-form-item\n          label=\"Type\"\n          :label-width=\"formLabelWidth\"\n        >\n          <el-select\n            class=\"form-item\"\n            v-model=\"formData.categoryType\"\n            placeholder=\"Select the type\"\n          >\n            <el-option\n              v-for=\"item in categoryTableConfig.typeOptions\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n    </div>\n    <div\n      slot=\"footer\"\n      class=\"dialog-footer\"\n    >\n      <el-button @click=\"dialogVisible = false\">Cancel</el-button>\n      <el-button\n        type=\"primary\"\n        @click=\"onSubmitClick\"\n      >Submit</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { mapActions } from \"vuex\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport categoryConfig from \"./config/category_config.js\";\nimport categoryApi from \"api/category\";\nimport categoryTableConfig from \"./config/category_table_config.js\";\n\nexport default {\n  props: {\n    mode: {\n      required: true\n    },\n    targetCategory: {\n      type: Object,\n      default() {\n        return null;\n      }\n    }\n  },\n  data() {\n    return {\n      categoryTableConfig,\n      dialogVisible: false,\n      formData: {\n        categoryName: \"\",\n        categoryType: categoryTableConfig.typeOptions[0].value\n      },\n      formRules: {\n        categoryName: [\n          {\n            required: true,\n            message: \"Please enter a valid name\",\n            trigger: \"blur\"\n          }\n        ]\n      },\n      formLabelWidth: \"100px\"\n    };\n  },\n\n  watch: {\n    targetCategory(category) {\n      if (category) {\n        Object.assign(this.formData, category);\n      }\n    }\n  },\n\n  methods: {\n    onSubmitClick() {\n      this.$refs.editCategoryForm.validate(valid => {\n        if (valid) {\n          if (this.mode === categoryConfig.MODE.NEW) {\n            const categoryId = uuidv4();\n            this.formData.categoryId = categoryId;\n            categoryApi.addCategory(this.formData).then(() => {\n              this.dialogVisible = false;\n              this.getCategoryList();\n              this.$message({\n                type: \"success\",\n                message: \"Add Category Success\"\n              });\n            });\n          } else if (this.mode === categoryConfig.MODE.EDIT) {\n            categoryApi.updateCategory(this.formData).then(() => {\n              this.dialogVisible = false;\n              this.getCategoryList();\n              this.$message({\n                type: \"success\",\n                message: \"Update Category Success\"\n              });\n            });\n          }\n        }\n      });\n    },\n\n    ...mapActions([\"getCategoryList\"])\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.ap-dialog {\n  overflow-x: visible;\n  .dialog-inner {\n    max-height: 60vh;\n    overflow-x: visible;\n    overflow-y: auto;\n    padding: 0 20px;\n  }\n\n  .form-item {\n    width: 100%;\n  }\n}\n</style>\n"]}]}