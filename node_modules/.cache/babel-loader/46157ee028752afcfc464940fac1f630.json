{"remainingRequest":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/babel-loader/lib/index.js!/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/eslint-loader/index.js??ref--13-0!/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/store/actions.js","dependencies":[{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/store/actions.js","mtime":1587340712496},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXgiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIi9Vc2Vycy94aWFuZ2xpdS9EZXZlbG9wbWVudC9Qcm9qZWN0cy94eHgvYXBlcmEtZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0ICogYXMgdHlwZXMgZnJvbSAiLi9tdXRhdGlvbi10eXBlIjsKaW1wb3J0IGNhdGVnb3J5QXBpIGZyb20gImFwaS9jYXRlZ29yeSI7CmltcG9ydCBwcm9kdWN0QXBpIGZyb20gImFwaS9wcm9kdWN0IjsKaW1wb3J0IHByb2R1Y3RDYXRlZ29yeUFwaSBmcm9tICJhcGkvcHJvZHVjdENhdGVnb3J5IjsKaW1wb3J0IHRvcGljQ2F0ZWdvcnlBcGkgZnJvbSAiYXBpL3RvcGljQ2F0ZWdvcnkiOwppbXBvcnQgYXJ0aWNsZUFwaSBmcm9tICJhcGkvYXJ0aWNsZSI7CmltcG9ydCB0b3BpY0FwaSBmcm9tICJhcGkvdG9waWMiOwppbXBvcnQgaG9tZVNlY3Rpb25BcGkgZnJvbSAiYXBpL2hvbWVTZWN0aW9uIjsKaW1wb3J0IHVzZXJBcGkgZnJvbSAiYXBpL3VzZXIiOwppbXBvcnQgXyBmcm9tICJsb2Rhc2giOwpleHBvcnQgdmFyIHNldEZ1bGxTY3JlZW5Mb2FkaW5nID0gZnVuY3Rpb24gc2V0RnVsbFNjcmVlbkxvYWRpbmcoX3JlZiwgdmFsdWUpIHsKICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgY29tbWl0KHR5cGVzLlNFVF9GVUxMU0NSRUVOX0xPQURJTkcsIHZhbHVlKTsKfTsKZXhwb3J0IHZhciBzZXRVc2VyID0gZnVuY3Rpb24gc2V0VXNlcihfcmVmMiwgdmFsdWUpIHsKICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogIGNvbW1pdCh0eXBlcy5TRVRfVVNFUiwgdmFsdWUpOwogIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiZ2F0dW5Vc2VySWQiLCB2YWx1ZS51c2VySWQpOwp9OwpleHBvcnQgdmFyIHNldENhcnQgPSBmdW5jdGlvbiBzZXRDYXJ0KF9yZWYzLCBsaXN0KSB7CiAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICBjb21taXQodHlwZXMuU0VUX1NIT1BQSU5HX0NBUlQsIGxpc3QpOwp9OwpleHBvcnQgdmFyIGFkZFByb3VkY3RUb0NhcnQgPSBmdW5jdGlvbiBhZGRQcm91ZGN0VG9DYXJ0KF9yZWY0LCBwcm9kdWN0KSB7CiAgdmFyIGNvbW1pdCA9IF9yZWY0LmNvbW1pdCwKICAgICAgc3RhdGUgPSBfcmVmNC5zdGF0ZTsKCiAgdmFyIGxpc3QgPSBfLmNsb25lRGVlcChzdGF0ZS5zaG9wcGluZ0NhcnQpOwoKICB2YXIgbWF0Y2hlZFByb2R1Y3QgPSBsaXN0LmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBpdGVtLnByb2R1Y3RJZCA9PSBwcm9kdWN0LnByb2R1Y3RJZCAmJiBpdGVtLm9wdGlvbiA9PSBwcm9kdWN0Lm9wdGlvbjsKICB9KTsKCiAgaWYgKG1hdGNoZWRQcm9kdWN0KSB7CiAgICBtYXRjaGVkUHJvZHVjdC5hbW91bnQgKz0gcHJvZHVjdC5hbW91bnQ7CiAgfSBlbHNlIHsKICAgIGxpc3QucHVzaChwcm9kdWN0KTsKICB9CgogIGNvbW1pdCh0eXBlcy5TRVRfU0hPUFBJTkdfQ0FSVCwgbGlzdCk7Cn07CmV4cG9ydCB2YXIgZGVsZXRlUHJvdWRjdEZyb21DYXJ0ID0gZnVuY3Rpb24gZGVsZXRlUHJvdWRjdEZyb21DYXJ0KF9yZWY1LCBwcm9kdWN0SWQpIHsKICB2YXIgY29tbWl0ID0gX3JlZjUuY29tbWl0LAogICAgICBzdGF0ZSA9IF9yZWY1LnN0YXRlOwoKICB2YXIgbGlzdCA9IF90b0NvbnN1bWFibGVBcnJheShzdGF0ZS5zaG9wcGluZ0NhcnQpOwoKICB2YXIgaW5kZXggPSBsaXN0LmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgaXRlbS5pZCA9PT0gcHJvZHVjdElkOwogIH0pOwogIGxpc3Quc3BsaWNlKGluZGV4LCAxKTsKICBjb21taXQodHlwZXMuU0VUX1NIT1BQSU5HX0NBUlQsIGxpc3QpOwp9OwpleHBvcnQgdmFyIGNsZWFyQ2FydCA9IGZ1bmN0aW9uIGNsZWFyQ2FydChfcmVmNikgewogIHZhciBjb21taXQgPSBfcmVmNi5jb21taXQ7CiAgY29tbWl0KHR5cGVzLlNFVF9TSE9QUElOR19DQVJULCBbXSk7Cn07CmV4cG9ydCB2YXIgbG9nb3V0ID0gZnVuY3Rpb24gbG9nb3V0KF9yZWY3KSB7CiAgdmFyIGNvbW1pdCA9IF9yZWY3LmNvbW1pdDsKICBjb21taXQodHlwZXMuU0VUX1VTRVIsIG51bGwpOwogIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiZ2F0dW5Vc2VySWQiKTsKfTsKZXhwb3J0IHZhciBnZXRQcm9kdWN0TGlzdCA9IGZ1bmN0aW9uIGdldFByb2R1Y3RMaXN0KF9yZWY4KSB7CiAgdmFyIGNvbW1pdCA9IF9yZWY4LmNvbW1pdDsKICByZXR1cm4gcHJvZHVjdEFwaS5nZXRQcm9kdWN0TGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlczEpIHsKICAgIHByb2R1Y3RDYXRlZ29yeUFwaS5nZXRQcm9kdWN0Q2F0ZWdvcnlMaXN0KCkudGhlbihmdW5jdGlvbiAocmVzMikgewogICAgICBjb21taXQodHlwZXMuU0VUX1BST0RVQ1RfTElTVCwgcmVzMS5kYXRhKTsKICAgICAgY29tbWl0KHR5cGVzLlNFVF9QUk9EVUNUX0NBVEVHT1JZX0xJU1QsIHJlczIuZGF0YSk7CiAgICB9KTsKICB9KTsKfTsKZXhwb3J0IHZhciBnZXRBcnRpY2xlTGlzdCA9IGZ1bmN0aW9uIGdldEFydGljbGVMaXN0KF9yZWY5KSB7CiAgdmFyIGNvbW1pdCA9IF9yZWY5LmNvbW1pdDsKICByZXR1cm4gYXJ0aWNsZUFwaS5nZXRBcnRpY2xlTGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgY29tbWl0KHR5cGVzLlNFVF9BUlRJQ0xFX0xJU1QsIHJlcy5kYXRhKTsKICB9KTsKfTsKZXhwb3J0IHZhciBnZXRUb3BpY0xpc3QgPSBmdW5jdGlvbiBnZXRUb3BpY0xpc3QoX3JlZjEwKSB7CiAgdmFyIGNvbW1pdCA9IF9yZWYxMC5jb21taXQ7CiAgcmV0dXJuIHRvcGljQXBpLmdldFRvcGljTGlzdCgpLnRoZW4oZnVuY3Rpb24gKHJlczEpIHsKICAgIHRvcGljQ2F0ZWdvcnlBcGkuZ2V0VG9waWNDYXRlZ29yeUxpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXMyKSB7CiAgICAgIGNvbW1pdCh0eXBlcy5TRVRfVE9QSUNfTElTVCwgcmVzMS5kYXRhKTsKICAgICAgY29tbWl0KHR5cGVzLlNFVF9UT1BJQ19DQVRFR09SWV9MSVNULCByZXMyLmRhdGEpOwogICAgfSk7CiAgfSk7Cn07CmV4cG9ydCB2YXIgZ2V0Q2F0ZWdvcnlMaXN0ID0gZnVuY3Rpb24gZ2V0Q2F0ZWdvcnlMaXN0KF9yZWYxMSkgewogIHZhciBjb21taXQgPSBfcmVmMTEuY29tbWl0OwogIHJldHVybiBjYXRlZ29yeUFwaS5nZXRDYXRlZ29yeUxpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgIGNvbW1pdCh0eXBlcy5TRVRfQ0FURUdPUllfTElTVCwgcmVzLmRhdGEpOwogIH0pOwp9OwpleHBvcnQgdmFyIGdldEhvbWVTZWN0aW9uTGlzdCA9IGZ1bmN0aW9uIGdldEhvbWVTZWN0aW9uTGlzdChfcmVmMTIpIHsKICB2YXIgY29tbWl0ID0gX3JlZjEyLmNvbW1pdDsKICByZXR1cm4gaG9tZVNlY3Rpb25BcGkuZ2V0U2VjdGlvbkxpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgIGNvbW1pdCh0eXBlcy5TRVRfSE9NRV9TRUNUSU9OX0xJU1QsIHJlcy5kYXRhKTsKICB9KTsKfTsgLy8g5ZCv5Yqo5pKt5pS+5ZmoCgpleHBvcnQgdmFyIGluaXRTaXRlID0gZnVuY3Rpb24gaW5pdFNpdGUoX3JlZjEzKSB7CiAgdmFyIGRpc3BhdGNoID0gX3JlZjEzLmRpc3BhdGNoOwogIGRpc3BhdGNoKCJnZXRQcm9kdWN0TGlzdCIpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIGRpc3BhdGNoKCJnZXRDYXRlZ29yeUxpc3QiKTsKICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBkaXNwYXRjaCgiZ2V0QXJ0aWNsZUxpc3QiKTsKICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBkaXNwYXRjaCgiZ2V0VG9waWNMaXN0Iik7CiAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gZGlzcGF0Y2goImdldEhvbWVTZWN0aW9uTGlzdCIpOwogIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgdmFyIHVzZXJJZCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiZ2F0dW5Vc2VySWQiKTsKCiAgICBpZiAodXNlcklkKSB7CiAgICAgIHVzZXJBcGkuZ2V0VXNlckJ5SWQodXNlcklkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIGRpc3BhdGNoKCJzZXRVc2VyIiwgcmVzLnVzZXIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSk7Cn07"},{"version":3,"sources":["/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/store/actions.js"],"names":["types","categoryApi","productApi","productCategoryApi","topicCategoryApi","articleApi","topicApi","homeSectionApi","userApi","_","setFullScreenLoading","value","commit","SET_FULLSCREEN_LOADING","setUser","SET_USER","window","localStorage","setItem","userId","setCart","list","SET_SHOPPING_CART","addProudctToCart","product","state","cloneDeep","shoppingCart","matchedProduct","find","item","productId","option","amount","push","deleteProudctFromCart","index","findIndex","id","splice","clearCart","logout","removeItem","getProductList","then","res1","getProductCategoryList","res2","SET_PRODUCT_LIST","data","SET_PRODUCT_CATEGORY_LIST","getArticleList","res","SET_ARTICLE_LIST","getTopicList","getTopicCategoryList","SET_TOPIC_LIST","SET_TOPIC_CATEGORY_LIST","getCategoryList","SET_CATEGORY_LIST","getHomeSectionList","getSectionList","SET_HOME_SECTION_LIST","initSite","dispatch","getItem","getUserById","success","user"],"mappings":"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","sourcesContent":["import * as types from \"./mutation-type\";\n\nimport categoryApi from \"api/category\";\nimport productApi from \"api/product\";\nimport productCategoryApi from \"api/productCategory\";\nimport topicCategoryApi from \"api/topicCategory\";\nimport articleApi from \"api/article\";\nimport topicApi from \"api/topic\";\nimport homeSectionApi from \"api/homeSection\";\nimport userApi from \"api/user\";\nimport _ from \"lodash\";\n\nexport const setFullScreenLoading = function({\n    commit\n}, value) {\n    commit(types.SET_FULLSCREEN_LOADING, value);\n};\n\nexport const setUser = function({\n    commit\n}, value) {\n    commit(types.SET_USER, value);\n    window.localStorage.setItem(\"gatunUserId\", value.userId);\n};\n\nexport const setCart = function({\n    commit\n}, list) {\n    commit(types.SET_SHOPPING_CART, list);\n\n};\n\nexport const addProudctToCart = function({\n    commit,\n    state\n}, product) {\n    const list = _.cloneDeep(state.shoppingCart);\n    const matchedProduct = list.find(item => {\n        return item.productId == product.productId && item.option == product.option;\n    });\n\n    if (matchedProduct) {\n        matchedProduct.amount += product.amount;\n    } else {\n        list.push(product);\n    }\n\n    commit(types.SET_SHOPPING_CART, list);\n};\n\nexport const deleteProudctFromCart = function({\n    commit,\n    state\n}, productId) {\n    const list = [...state.shoppingCart];\n    const index = list.findIndex(item => {\n        item.id === productId;\n    });\n\n    list.splice(index, 1);\n    commit(types.SET_SHOPPING_CART, list);\n};\n\nexport const clearCart = function({\n    commit\n}) {\n    commit(types.SET_SHOPPING_CART, []);\n};\n\nexport const logout = function({\n    commit\n}) {\n    commit(types.SET_USER, null);\n    window.localStorage.removeItem(\"gatunUserId\");\n};\n\nexport const getProductList = function({\n    commit\n}) {\n    return productApi.getProductList().then(res1 => {\n        productCategoryApi.getProductCategoryList().then(res2 => {\n            commit(types.SET_PRODUCT_LIST, res1.data);\n            commit(types.SET_PRODUCT_CATEGORY_LIST, res2.data);\n        });\n    });\n};\n\nexport const getArticleList = function({\n    commit\n}) {\n    return articleApi.getArticleList().then(res => {\n        commit(types.SET_ARTICLE_LIST, res.data);\n    });\n};\n\nexport const getTopicList = function({\n    commit\n}) {\n    return topicApi.getTopicList().then(res1 => {\n        topicCategoryApi.getTopicCategoryList().then(res2 => {\n            commit(types.SET_TOPIC_LIST, res1.data);\n            commit(types.SET_TOPIC_CATEGORY_LIST, res2.data);\n        });\n    });\n};\n\nexport const getCategoryList = function({\n    commit\n}) {\n    return categoryApi.getCategoryList().then(res => {\n        commit(types.SET_CATEGORY_LIST, res.data);\n    });\n};\n\nexport const getHomeSectionList = function({\n    commit\n}) {\n    return homeSectionApi.getSectionList().then(res => {\n        commit(types.SET_HOME_SECTION_LIST, res.data);\n    });\n};\n\n// 启动播放器\nexport const initSite = function({\n    dispatch\n}) {\n    dispatch(\"getProductList\")\n        .then(() => {\n            return dispatch(\"getCategoryList\");\n        })\n        .then(() => {\n            return dispatch(\"getArticleList\");\n        })\n        .then(() => {\n            return dispatch(\"getTopicList\");\n        })\n        .then(() => {\n            return dispatch(\"getHomeSectionList\");\n        })\n        .then(() => {\n            const userId = window.localStorage.getItem(\"gatunUserId\");\n            if (userId) {\n                userApi.getUserById(userId).then(res => {\n                    if (res.success) {\n                        dispatch(\"setUser\", res.user);\n                    }\n                });\n            }\n        });\n};"]}]}