{"remainingRequest":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/thread-loader/dist/cjs.js!/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/babel-loader/lib/index.js!/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/views/Manage/AddCategoryDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/views/Manage/AddCategoryDialog.vue","mtime":1586117860010},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3hpYW5nbGl1L0RldmVsb3BtZW50L1Byb2plY3RzL3h4eC9hcGVyYS1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAidXVpZCI7CmltcG9ydCBjYXRlZ29yeUNvbmZpZyBmcm9tICIuL2NvbmZpZy9jYXRlZ29yeV9jb25maWcuanMiOwppbXBvcnQgY2F0ZWdvcnlBcGkgZnJvbSAiYXBpL2NhdGVnb3J5IjsKaW1wb3J0IGNhdGVnb3J5VGFibGVDb25maWcgZnJvbSAiLi9jb25maWcvY2F0ZWdvcnlfdGFibGVfY29uZmlnLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBtb2RlOiB7CiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgdGFyZ2V0Q2F0ZWdvcnk6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNhdGVnb3J5VGFibGVDb25maWc6IGNhdGVnb3J5VGFibGVDb25maWcsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBmb3JtRGF0YTogewogICAgICAgIGNhdGVnb3J5TmFtZTogIiIsCiAgICAgICAgY2F0ZWdvcnlUeXBlOiBjYXRlZ29yeVRhYmxlQ29uZmlnLnR5cGVPcHRpb25zWzBdLnZhbHVlCiAgICAgIH0sCiAgICAgIGZvcm1SdWxlczogewogICAgICAgIGNhdGVnb3J5TmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIlBsZWFzZSBlbnRlciBhIHZhbGlkIG5hbWUiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgZm9ybUxhYmVsV2lkdGg6ICIxMDBweCIKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgdGFyZ2V0Q2F0ZWdvcnk6IGZ1bmN0aW9uIHRhcmdldENhdGVnb3J5KGNhdGVnb3J5KSB7CiAgICAgIGlmIChjYXRlZ29yeSkgewogICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5mb3JtRGF0YSwgY2F0ZWdvcnkpOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKHsKICAgIG9uU3VibWl0Q2xpY2s6IGZ1bmN0aW9uIG9uU3VibWl0Q2xpY2soKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzLmVkaXRDYXRlZ29yeUZvcm0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAoX3RoaXMubW9kZSA9PT0gY2F0ZWdvcnlDb25maWcuTU9ERS5ORVcpIHsKICAgICAgICAgICAgdmFyIGNhdGVnb3J5SWQgPSB1dWlkdjQoKTsKICAgICAgICAgICAgX3RoaXMuZm9ybURhdGEuY2F0ZWdvcnlJZCA9IGNhdGVnb3J5SWQ7CiAgICAgICAgICAgIGNhdGVnb3J5QXBpLmFkZENhdGVnb3J5KF90aGlzLmZvcm1EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBfdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CgogICAgICAgICAgICAgIF90aGlzLmdldENhdGVnb3J5TGlzdCgpOwoKICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAiQWRkIENhdGVnb3J5IFN1Y2Nlc3MiCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChfdGhpcy5tb2RlID09PSBjYXRlZ29yeUNvbmZpZy5NT0RFLkVESVQpIHsKICAgICAgICAgICAgY2F0ZWdvcnlBcGkudXBkYXRlQ2F0ZWdvcnkoX3RoaXMuZm9ybURhdGEpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgIF90aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKCiAgICAgICAgICAgICAgX3RoaXMuZ2V0Q2F0ZWdvcnlMaXN0KCk7CgogICAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJVcGRhdGUgQ2F0ZWdvcnkgU3VjY2VzcyIKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCBtYXBBY3Rpb25zKFsiZ2V0Q2F0ZWdvcnlMaXN0Il0pKQp9Ow=="},{"version":3,"sources":["AddCategoryDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,SAAA,UAAA,QAAA,MAAA;AACA,SAAA,EAAA,IAAA,MAAA,QAAA,MAAA;AACA,OAAA,cAAA,MAAA,6BAAA;AACA,OAAA,WAAA,MAAA,cAAA;AACA,OAAA,mBAAA,MAAA,mCAAA;AAEA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,QAAA,EAAA;AADA,KADA;AAIA,IAAA,cAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAFA,sBAEA;AACA,eAAA,IAAA;AACA;AAJA;AAJA,GADA;AAYA,EAAA,IAZA,kBAYA;AACA,WAAA;AACA,MAAA,mBAAA,EAAA,mBADA;AAEA,MAAA,aAAA,EAAA,KAFA;AAGA,MAAA,QAAA,EAAA;AACA,QAAA,YAAA,EAAA,EADA;AAEA,QAAA,YAAA,EAAA,mBAAA,CAAA,WAAA,CAAA,CAAA,EAAA;AAFA,OAHA;AAOA,MAAA,SAAA,EAAA;AACA,QAAA,YAAA,EAAA,CACA;AACA,UAAA,QAAA,EAAA,IADA;AAEA,UAAA,OAAA,EAAA,2BAFA;AAGA,UAAA,OAAA,EAAA;AAHA,SADA;AADA,OAPA;AAgBA,MAAA,cAAA,EAAA;AAhBA,KAAA;AAkBA,GA/BA;AAiCA,EAAA,KAAA,EAAA;AACA,IAAA,cADA,0BACA,QADA,EACA;AACA,UAAA,QAAA,EAAA;AACA,QAAA,MAAA,CAAA,MAAA,CAAA,KAAA,QAAA,EAAA,QAAA;AACA;AACA;AALA,GAjCA;AAyCA,EAAA,OAAA;AACA,IAAA,aADA,2BACA;AAAA;;AACA,WAAA,KAAA,CAAA,gBAAA,CAAA,QAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA,cAAA,KAAA,CAAA,IAAA,KAAA,cAAA,CAAA,IAAA,CAAA,GAAA,EAAA;AACA,gBAAA,UAAA,GAAA,MAAA,EAAA;AACA,YAAA,KAAA,CAAA,QAAA,CAAA,UAAA,GAAA,UAAA;AACA,YAAA,WAAA,CAAA,WAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,cAAA,KAAA,CAAA,aAAA,GAAA,KAAA;;AACA,cAAA,KAAA,CAAA,eAAA;;AACA,kBAAA,GAAA,CAAA,OAAA,EAAA;AACA,gBAAA,KAAA,CAAA,QAAA,CAAA;AACA,kBAAA,IAAA,EAAA,SADA;AAEA,kBAAA,OAAA,EAAA;AAFA,iBAAA;AAIA;AACA,aATA;AAUA,WAbA,MAaA,IAAA,KAAA,CAAA,IAAA,KAAA,cAAA,CAAA,IAAA,CAAA,IAAA,EAAA;AACA,YAAA,WAAA,CAAA,cAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,cAAA,KAAA,CAAA,aAAA,GAAA,KAAA;;AACA,cAAA,KAAA,CAAA,eAAA;;AACA,kBAAA,GAAA,CAAA,OAAA,EAAA;AACA,gBAAA,KAAA,CAAA,QAAA,CAAA;AACA,kBAAA,IAAA,EAAA,SADA;AAEA,kBAAA,OAAA,EAAA;AAFA,iBAAA;AAIA;AACA,aATA;AAUA;AACA;AACA,OA5BA;AA6BA;AA/BA,KAiCA,UAAA,CAAA,CAAA,iBAAA,CAAA,CAjCA;AAzCA,CAAA","sourcesContent":["<template>\n  <el-dialog class=\"ap-dialog\" title=\"Edit Category\" :visible.sync=\"dialogVisible\" width=\"1100px\">\n    <div class=\"dialog-inner\">\n      <el-form :model=\"formData\" :rules=\"formRules\" ref=\"editCategoryForm\">\n        <!-- Name -->\n        <el-form-item label=\"Name\" :label-width=\"formLabelWidth\" prop=\"categoryName\">\n          <el-input v-model=\"formData.categoryName\"></el-input>\n        </el-form-item>\n\n        <!-- Parameter -->\n        <el-form-item label=\"Type\" :label-width=\"formLabelWidth\">\n          <el-select\n            class=\"form-item\"\n            v-model=\"formData.categoryType\"\n            placeholder=\"Select the type\"\n          >\n            <el-option\n              v-for=\"item in categoryTableConfig.typeOptions\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n    </div>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"dialogVisible = false\">Cancel</el-button>\n      <el-button type=\"primary\" @click=\"onSubmitClick\">Submit</el-button>\n    </div>\n  </el-dialog>\n</template>\n\n<script>\nimport { mapActions } from \"vuex\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport categoryConfig from \"./config/category_config.js\";\nimport categoryApi from \"api/category\";\nimport categoryTableConfig from \"./config/category_table_config.js\";\n\nexport default {\n  props: {\n    mode: {\n      required: true,\n    },\n    targetCategory: {\n      type: Object,\n      default() {\n        return null;\n      },\n    },\n  },\n  data() {\n    return {\n      categoryTableConfig,\n      dialogVisible: false,\n      formData: {\n        categoryName: \"\",\n        categoryType: categoryTableConfig.typeOptions[0].value,\n      },\n      formRules: {\n        categoryName: [\n          {\n            required: true,\n            message: \"Please enter a valid name\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n      formLabelWidth: \"100px\",\n    };\n  },\n\n  watch: {\n    targetCategory(category) {\n      if (category) {\n        Object.assign(this.formData, category);\n      }\n    },\n  },\n\n  methods: {\n    onSubmitClick() {\n      this.$refs.editCategoryForm.validate((valid) => {\n        if (valid) {\n          if (this.mode === categoryConfig.MODE.NEW) {\n            const categoryId = uuidv4();\n            this.formData.categoryId = categoryId;\n            categoryApi.addCategory(this.formData).then((res) => {\n              this.dialogVisible = false;\n              this.getCategoryList();\n              if (res.success) {\n                this.$message({\n                  type: \"success\",\n                  message: \"Add Category Success\",\n                });\n              }\n            });\n          } else if (this.mode === categoryConfig.MODE.EDIT) {\n            categoryApi.updateCategory(this.formData).then((res) => {\n              this.dialogVisible = false;\n              this.getCategoryList();\n              if (res.success) {\n                this.$message({\n                  type: \"success\",\n                  message: \"Update Category Success\",\n                });\n              }\n            });\n          }\n        }\n      });\n    },\n\n    ...mapActions([\"getCategoryList\"]),\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.ap-dialog {\n  overflow-x: visible;\n  .dialog-inner {\n    max-height: 60vh;\n    overflow-x: visible;\n    overflow-y: auto;\n    padding: 0 20px;\n  }\n\n  .form-item {\n    width: 100%;\n  }\n}\n</style>\n"],"sourceRoot":"src/views/Manage"}]}