{"remainingRequest":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/thread-loader/dist/cjs.js!/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/babel-loader/lib/index.js!/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/views/Category/ProductList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/views/Category/ProductList.vue","mtime":1586121701697},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMveGlhbmdsaXUvRGV2ZWxvcG1lbnQvUHJvamVjdHMveHh4L2FwZXJhLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgUHJvZHVjdExpc3QgZnJvbSAiY29tcG9uZW50cy9Qcm9kdWN0TGlzdCI7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgdG9waWNOYW1lOiB7CiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9CiAgfSwKICBkYXRlOiBmdW5jdGlvbiBkYXRlKCkgewogICAgcmV0dXJuIHt9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoewogICAgbWF0Y2hlZFRvcGljOiBmdW5jdGlvbiBtYXRjaGVkVG9waWMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgdG9waWMgPSB0aGlzLnRvcGljTGlzdC5maW5kKGZ1bmN0aW9uICh0b3BpYykgewogICAgICAgIGlmICh0b3BpYy50b3BpY05hbWUgPT09IF90aGlzLnRvcGljTmFtZSkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9KSB8fCB7CiAgICAgICAgc3VjY2VzczogZmFsc2UKICAgICAgfTsKICAgICAgcmV0dXJuIHRvcGljOwogICAgfSwKICAgIG1hdGNoZWRDYXRlZ29yeUxpc3Q6IGZ1bmN0aW9uIG1hdGNoZWRDYXRlZ29yeUxpc3QoKSB7CiAgICAgIHZhciBsaXN0ID0gW107CgogICAgICBpZiAodGhpcy5tYXRjaGVkVG9waWMgJiYgdGhpcy5tYXRjaGVkVG9waWMudG9waWNJZCkgewogICAgICAgIHZhciB0b3BpY0lkID0gdGhpcy5tYXRjaGVkVG9waWMudG9waWNJZDsKICAgICAgICB0aGlzLnRvcGljQ2F0ZWdvcnlMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIGlmIChpdGVtLnRvcGljSWQgPT09IHRvcGljSWQpIHsKICAgICAgICAgICAgbGlzdC5wdXNoKGl0ZW0uY2F0ZWdvcnlJZCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBsaXN0OwogICAgfSwKICAgIG1hdGNoZWRQcm9kdWN0TGlzdDogZnVuY3Rpb24gbWF0Y2hlZFByb2R1Y3RMaXN0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBwcm9kdWN0SWRTZXQgPSBuZXcgU2V0KCk7CgogICAgICBpZiAodGhpcy5wcm9kdWN0Q2F0ZWdvcnlMaXN0KSB7CiAgICAgICAgdGhpcy5wcm9kdWN0Q2F0ZWdvcnlMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIGlmIChfdGhpczIubWF0Y2hlZENhdGVnb3J5TGlzdC5pbmNsdWRlcyhpdGVtLmNhdGVnb3J5SWQpKSB7CiAgICAgICAgICAgIHByb2R1Y3RJZFNldC5hZGQoaXRlbS5wcm9kdWN0SWQpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICB2YXIgbGlzdCA9IFtdOwoKICAgICAgaWYgKHRoaXMucHJvZHVjdExpc3QpIHsKICAgICAgICB0aGlzLnByb2R1Y3RMaXN0LmZvckVhY2goZnVuY3Rpb24gKHByb2R1Y3QpIHsKICAgICAgICAgIGlmIChwcm9kdWN0SWRTZXQuaGFzKHByb2R1Y3QucHJvZHVjdElkKSkgewogICAgICAgICAgICBwcm9kdWN0LnByb2R1Y3RJbWFnZUxpc3QgPSBKU09OLnBhcnNlKHByb2R1Y3QucHJvZHVjdEltYWdlcyk7CiAgICAgICAgICAgIGxpc3QucHVzaChwcm9kdWN0KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIGxpc3Q7CiAgICB9CiAgfSwgbWFwR2V0dGVycyhbInRvcGljTGlzdCIsICJwcm9kdWN0TGlzdCIsICJwcm9kdWN0Q2F0ZWdvcnlMaXN0IiwgInRvcGljQ2F0ZWdvcnlMaXN0Il0pKSwKICB3YXRjaDogewogICAgbWF0Y2hlZFRvcGljOiBmdW5jdGlvbiBtYXRjaGVkVG9waWModG9waWMpIHsKICAgICAgaWYgKHRvcGljICYmIHRvcGljLnN1Y2Nlc3MgPT09IGZhbHNlKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi8iKTsKICAgICAgfQogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgImFwLXByb2R1Y3QtbGlzdCI6IFByb2R1Y3RMaXN0CiAgfQp9Ow=="},{"version":3,"sources":["ProductList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAWA,SAAA,UAAA,QAAA,MAAA;AACA,OAAA,WAAA,MAAA,wBAAA;AACA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,SAAA,EAAA;AACA,MAAA,OAAA,EAAA;AADA;AADA,GADA;AAMA,EAAA,IANA,kBAMA;AACA,WAAA,EAAA;AACA,GARA;AASA,EAAA,QAAA;AACA,IAAA,YADA,0BACA;AAAA;;AACA,UAAA,KAAA,GAAA,KAAA,SAAA,CAAA,IAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,CAAA,SAAA,KAAA,KAAA,CAAA,SAAA,EAAA;AACA,iBAAA,IAAA;AACA;AACA,OAJA,KAIA;AACA,QAAA,OAAA,EAAA;AADA,OAJA;AAOA,aAAA,KAAA;AACA,KAVA;AAWA,IAAA,mBAXA,iCAWA;AACA,UAAA,IAAA,GAAA,EAAA;;AACA,UAAA,KAAA,YAAA,IAAA,KAAA,YAAA,CAAA,OAAA,EAAA;AACA,YAAA,OAAA,GAAA,KAAA,YAAA,CAAA,OAAA;AACA,aAAA,iBAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,IAAA,CAAA,OAAA,KAAA,OAAA,EAAA;AACA,YAAA,IAAA,CAAA,IAAA,CAAA,IAAA,CAAA,UAAA;AACA;AACA,SAJA;AAKA;;AACA,aAAA,IAAA;AACA,KAtBA;AAuBA,IAAA,kBAvBA,gCAuBA;AAAA;;AACA,UAAA,YAAA,GAAA,IAAA,GAAA,EAAA;;AACA,UAAA,KAAA,mBAAA,EAAA;AACA,aAAA,mBAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,cAAA,MAAA,CAAA,mBAAA,CAAA,QAAA,CAAA,IAAA,CAAA,UAAA,CAAA,EAAA;AACA,YAAA,YAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA;AACA;AACA,SAJA;AAKA;;AAEA,UAAA,IAAA,GAAA,EAAA;;AAEA,UAAA,KAAA,WAAA,EAAA;AACA,aAAA,WAAA,CAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,cAAA,YAAA,CAAA,GAAA,CAAA,OAAA,CAAA,SAAA,CAAA,EAAA;AACA,YAAA,OAAA,CAAA,gBAAA,GAAA,IAAA,CAAA,KAAA,CAAA,OAAA,CAAA,aAAA,CAAA;AACA,YAAA,IAAA,CAAA,IAAA,CAAA,OAAA;AACA;AACA,SALA;AAMA;;AAEA,aAAA,IAAA;AACA;AA7CA,KA8CA,UAAA,CAAA,CAAA,WAAA,EAAA,aAAA,EAAA,qBAAA,EAAA,mBAAA,CAAA,CA9CA,CATA;AAyDA,EAAA,KAAA,EAAA;AACA,IAAA,YADA,wBACA,KADA,EACA;AACA,UAAA,KAAA,IAAA,KAAA,CAAA,OAAA,KAAA,KAAA,EAAA;AACA,aAAA,OAAA,CAAA,IAAA,CAAA,GAAA;AACA;AACA;AALA,GAzDA;AAgEA,EAAA,UAAA,EAAA;AACA,uBAAA;AADA;AAhEA,CAAA","sourcesContent":["<template>\n  <div>\n    <ap-product-list\n      class=\"product-list\"\n      :title=\"topicName\"\n      :productList=\"matchedProductList\"\n    ></ap-product-list>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport ProductList from \"components/ProductList\";\nexport default {\n  props: {\n    topicName: {\n      default: \"\",\n    },\n  },\n  date() {\n    return {};\n  },\n  computed: {\n    matchedTopic() {\n      const topic = this.topicList.find((topic) => {\n        if (topic.topicName === this.topicName) {\n          return true;\n        }\n      }) || {\n        success: false,\n      };\n      return topic;\n    },\n    matchedCategoryList() {\n      const list = [];\n      if (this.matchedTopic && this.matchedTopic.topicId) {\n        const topicId = this.matchedTopic.topicId;\n        this.topicCategoryList.forEach((item) => {\n          if (item.topicId === topicId) {\n            list.push(item.categoryId);\n          }\n        });\n      }\n      return list;\n    },\n    matchedProductList() {\n      const productIdSet = new Set();\n      if (this.productCategoryList) {\n        this.productCategoryList.forEach((item) => {\n          if (this.matchedCategoryList.includes(item.categoryId)) {\n            productIdSet.add(item.productId);\n          }\n        });\n      }\n\n      const list = [];\n\n      if (this.productList) {\n        this.productList.forEach((product) => {\n          if (productIdSet.has(product.productId)) {\n            product.productImageList = JSON.parse(product.productImages);\n            list.push(product);\n          }\n        });\n      }\n\n      return list;\n    },\n    ...mapGetters([\"topicList\", \"productList\", \"productCategoryList\", \"topicCategoryList\"]),\n  },\n  watch: {\n    matchedTopic(topic) {\n      if (topic && topic.success === false) {\n        this.$router.push(\"/\");\n      }\n    },\n  },\n  components: {\n    \"ap-product-list\": ProductList,\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.product-list {\n  margin-top: 50px;\n}\n</style>\n"],"sourceRoot":"src/views/Category"}]}