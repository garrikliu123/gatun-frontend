{"remainingRequest":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/babel-loader/lib/index.js!/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/views/Manage/AddTopicDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/src/views/Manage/AddTopicDialog.vue","mtime":1586032509969},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xiangliu/Development/Projects/xxx/apera-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3hpYW5nbGl1L0RldmVsb3BtZW50L1Byb2plY3RzL3h4eC9hcGVyYS1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gInV1aWQiOwppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBBY3Rpb25zIH0gZnJvbSAidnVleCI7CmltcG9ydCB7IHVwbG9hZEltYWdlIH0gZnJvbSAiYXBpL2NvbW1vbiI7CmltcG9ydCB0b3BpY0FwaSBmcm9tICJhcGkvdG9waWMiOwppbXBvcnQgdG9waWNDb25maWcgZnJvbSAiLi9jb25maWcvdG9waWNfY29uZmlnLmpzIjsKaW1wb3J0IHRvcGljVGFibGVDb25maWcgZnJvbSAiLi9jb25maWcvdG9waWNfdGFibGVfY29uZmlnLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBtb2RlOiB7CiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgdGFyZ2V0VG9waWM6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRvcGljVGFibGVDb25maWc6IHRvcGljVGFibGVDb25maWcsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBmb3JtRGF0YTogewogICAgICAgIHRvcGljTmFtZTogIiIsCiAgICAgICAgdG9waWNUeXBlOiB0b3BpY1RhYmxlQ29uZmlnLnR5cGVPcHRpb25zWzBdLnZhbHVlLAogICAgICAgIHRvcGljSW1hZ2U6ICIiLAogICAgICAgIGNhdGVnb3J5TGlzdDogW10KICAgICAgfSwKICAgICAgZm9ybVJ1bGVzOiB7CiAgICAgICAgdG9waWNOYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAiUGxlYXNlIGVudGVyIGEgdmFsaWQgbmFtZSIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XQogICAgICB9LAogICAgICBmb3JtTGFiZWxXaWR0aDogIjEwMHB4IgogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHsKICAgIG1hdGNoZWRDYXRlZ29yeUxpc3Q6IGZ1bmN0aW9uIG1hdGNoZWRDYXRlZ29yeUxpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgIHRoaXMuY2F0ZWdvcnlMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpZiAoaXRlbS5jYXRlZ29yeVR5cGUgPT09IF90aGlzLmZvcm1EYXRhLnRvcGljVHlwZSkgewogICAgICAgICAgcmVzdWx0LnB1c2goewogICAgICAgICAgICBsYWJlbDogaXRlbS5jYXRlZ29yeU5hbWUsCiAgICAgICAgICAgIHZhbHVlOiBpdGVtLmNhdGVnb3J5SWQKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfSwgbWFwR2V0dGVycyhbImNhdGVnb3J5TGlzdCJdKSksCiAgd2F0Y2g6IHsKICAgIHRhcmdldFRvcGljOiBmdW5jdGlvbiB0YXJnZXRUb3BpYyh0b3BpYykgewogICAgICBpZiAodG9waWMpIHsKICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuZm9ybURhdGEsIHRvcGljKTsKICAgICAgfQogICAgfSwKICAgICJmb3JtRGF0YS50b3BpY1R5cGUiOiBmdW5jdGlvbiBmb3JtRGF0YVRvcGljVHlwZSgpIHsKICAgICAgdGhpcy5mb3JtRGF0YS5jYXRlZ29yeUxpc3QgPSBbXTsKICAgIH0KICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoewogICAgb25TdWJtaXRDbGljazogZnVuY3Rpb24gb25TdWJtaXRDbGljaygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzLmVkaXRUb3BpY0Zvcm0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAoX3RoaXMyLm1vZGUgPT09IHRvcGljQ29uZmlnLk1PREUuTkVXKSB7CiAgICAgICAgICAgIHZhciB0b3BpY0lkID0gdXVpZHY0KCk7CiAgICAgICAgICAgIF90aGlzMi5mb3JtRGF0YS50b3BpY0lkID0gdG9waWNJZDsKICAgICAgICAgICAgdG9waWNBcGkuYWRkVG9waWMoX3RoaXMyLmZvcm1EYXRhKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBfdGhpczIuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwoKICAgICAgICAgICAgICBfdGhpczIuZ2V0VG9waWNMaXN0KCk7CgogICAgICAgICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAiQWRkIFRvcGljIFN1Y2Nlc3MiCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIGlmIChfdGhpczIubW9kZSA9PT0gdG9waWNDb25maWcuTU9ERS5FRElUKSB7CiAgICAgICAgICAgIHRvcGljQXBpLnVwZGF0ZVRvcGljKF90aGlzMi5mb3JtRGF0YSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgX3RoaXMyLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKCiAgICAgICAgICAgICAgX3RoaXMyLmdldFRvcGljTGlzdCgpOwoKICAgICAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgbWVzc2FnZTogIlVwZGF0ZSBUb3BpYyBTdWNjZXNzIgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG9uVXBsb2FkSW1hZ2U6IGZ1bmN0aW9uIG9uVXBsb2FkSW1hZ2UocmVxKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIGZpbGV0eXBlID0gIiI7CgogICAgICBpZiAocmVxLmZpbGUudHlwZSA9PT0gImltYWdlL3BuZyIpIHsKICAgICAgICBmaWxldHlwZSA9ICJwbmciOwogICAgICB9IGVsc2UgewogICAgICAgIGZpbGV0eXBlID0gImpwZyI7CiAgICAgIH0gLy8g6YeN5ZG95ZCN6KaB5LiK5Lyg55qE5paH5Lu2CgoKICAgICAgdmFyIGZpbGVuYW1lID0gdXVpZHY0KCkgKyAiLiIgKyBmaWxldHlwZTsKICAgICAgdmFyIGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1kYXRhLmFwcGVuZCgiZmlsZSIsIHJlcS5maWxlKTsKICAgICAgdXBsb2FkSW1hZ2UoZmlsZW5hbWUsIGZvcm1kYXRhLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJtdWx0aXBhcnQvZm9ybS1kYXRhIgogICAgICAgIH0KICAgICAgfSwgZnVuY3Rpb24gKGltYWdlKSB7CiAgICAgICAgaWYgKGltYWdlLnVybCkgewogICAgICAgICAgX3RoaXMzLmZvcm1EYXRhLnRvcGljSW1hZ2UgPSBpbWFnZS51cmw7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDpqozor4Hmlofku7blkIjms5XmgKcKICAgIGJlZm9yZVVwbG9hZDogZnVuY3Rpb24gYmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgdmFyIGlzSlBHID0gZmlsZS50eXBlID09PSAiaW1hZ2UvanBlZyIgfHwgZmlsZS50eXBlID09PSAiaW1hZ2UvcG5nIjsKICAgICAgdmFyIGlzTHQyTSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgNTsKCiAgICAgIGlmICghaXNKUEcpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCJJbWFnZSB0eXBlIHNob3VsZCBiZSBKUEVEIG9yIFBORyIpOwogICAgICB9CgogICAgICBpZiAoIWlzTHQyTSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIkltYWdlIHNpemUgc2hvdWxkIGxlc3MgdGhhbiA1TUIiKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGlzSlBHICYmIGlzTHQyTTsKICAgIH0sCiAgICBvblVwbG9hZFN1Y2Nlc3M6IGZ1bmN0aW9uIG9uVXBsb2FkU3VjY2VzcygpIHt9CiAgfSwgbWFwQWN0aW9ucyhbImdldFRvcGljTGlzdCJdKSkKfTs="},{"version":3,"sources":["AddTopicDialog.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <el-dialog\n    class=\"ap-dialog\"\n    title=\"Edit Topic\"\n    :visible.sync=\"dialogVisible\"\n    width=\"1100px\"\n  >\n    <div class=\"dialog-inner\">\n      <el-form\n        :model=\"formData\"\n        :rules=\"formRules\"\n        ref=\"editTopicForm\"\n      >\n        <!-- Name -->\n        <el-form-item\n          label=\"Name\"\n          :label-width=\"formLabelWidth\"\n          prop=\"topicName\"\n        >\n          <el-input v-model=\"formData.topicName\"></el-input>\n        </el-form-item>\n\n        <!-- Type -->\n        <el-form-item\n          label=\"Type\"\n          :label-width=\"formLabelWidth\"\n        >\n          <el-select\n            class=\"form-item\"\n            v-model=\"formData.topicType\"\n            placeholder=\"Select the type\"\n          >\n            <el-option\n              v-for=\"item in topicTableConfig.typeOptions\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n\n        <!-- Category -->\n        <el-form-item\n          label=\"Category\"\n          :label-width=\"formLabelWidth\"\n          prop=\"categoryList\"\n        >\n          <el-select\n            class=\"form-item\"\n            v-model=\"formData.categoryList\"\n            filterable\n            multiple\n          >\n            <el-option\n              v-for=\"item in matchedCategoryList\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n\n        <!-- Pictures -->\n        <el-upload\n          class=\"avatar-uploader\"\n          action=\"\"\n          :show-file-list=\"false\"\n          :http-request=\"onUploadImage\"\n          :before-upload=\"beforeUpload\"\n          :on-success=\"onUploadSuccess\"\n        >\n          <img\n            v-if=\"formData.topicImage\"\n            :src=\"formData.topicImage\"\n            class=\"avatar\"\n          />\n          <i\n            v-else\n            class=\"el-icon-plus avatar-uploader-icon\"\n          ></i>\n        </el-upload>\n      </el-form>\n    </div>\n    <div\n      slot=\"footer\"\n      class=\"dialog-footer\"\n    >\n      <el-button @click=\"dialogVisible = false\">Cancel</el-button>\n      <el-button\n        type=\"primary\"\n        @click=\"onSubmitClick\"\n      >Submit</el-button>\n    </div>\n  </el-dialog>\n</template>\n<script>\nimport { v4 as uuidv4 } from \"uuid\";\nimport { mapGetters, mapActions } from \"vuex\";\nimport { uploadImage } from \"api/common\";\nimport topicApi from \"api/topic\";\nimport topicConfig from \"./config/topic_config.js\";\nimport topicTableConfig from \"./config/topic_table_config.js\";\n\nexport default {\n  props: {\n    mode: {\n      required: true\n    },\n    targetTopic: {\n      type: Object,\n      default() {\n        return null;\n      }\n    }\n  },\n  data() {\n    return {\n      topicTableConfig,\n      dialogVisible: false,\n      formData: {\n        topicName: \"\",\n        topicType: topicTableConfig.typeOptions[0].value,\n        topicImage: \"\",\n        categoryList: []\n      },\n      formRules: {\n        topicName: [\n          {\n            required: true,\n            message: \"Please enter a valid name\",\n            trigger: \"blur\"\n          }\n        ]\n      },\n      formLabelWidth: \"100px\"\n    };\n  },\n\n  computed: {\n    matchedCategoryList() {\n      const result = [];\n      this.categoryList.forEach(item => {\n        if (item.categoryType === this.formData.topicType) {\n          result.push({\n            label: item.categoryName,\n            value: item.categoryId\n          });\n        }\n      });\n      return result;\n    },\n    ...mapGetters([\"categoryList\"])\n  },\n\n  watch: {\n    targetTopic(topic) {\n      if (topic) {\n        Object.assign(this.formData, topic);\n      }\n    },\n    \"formData.topicType\"() {\n      this.formData.categoryList = [];\n    }\n  },\n\n  methods: {\n    onSubmitClick() {\n      this.$refs.editTopicForm.validate(valid => {\n        if (valid) {\n          if (this.mode === topicConfig.MODE.NEW) {\n            const topicId = uuidv4();\n            this.formData.topicId = topicId;\n            topicApi.addTopic(this.formData).then(() => {\n              this.dialogVisible = false;\n              this.getTopicList();\n              this.$message({\n                type: \"success\",\n                message: \"Add Topic Success\"\n              });\n            });\n          } else if (this.mode === topicConfig.MODE.EDIT) {\n            topicApi.updateTopic(this.formData).then(() => {\n              this.dialogVisible = false;\n              this.getTopicList();\n              this.$message({\n                type: \"success\",\n                message: \"Update Topic Success\"\n              });\n            });\n          }\n        }\n      });\n    },\n\n    onUploadImage(req) {\n      let filetype = \"\";\n      if (req.file.type === \"image/png\") {\n        filetype = \"png\";\n      } else {\n        filetype = \"jpg\";\n      }\n\n      // 重命名要上传的文件\n      const filename = uuidv4() + \".\" + filetype;\n\n      const formdata = new FormData();\n\n      formdata.append(\"file\", req.file);\n\n      uploadImage(\n        filename,\n        formdata,\n        {\n          headers: { \"Content-Type\": \"multipart/form-data\" }\n        },\n        image => {\n          if (image.url) {\n            this.formData.topicImage = image.url;\n          }\n        }\n      );\n    },\n\n    // 验证文件合法性\n    beforeUpload(file) {\n      const isJPG = file.type === \"image/jpeg\" || file.type === \"image/png\";\n      const isLt2M = file.size / 1024 / 1024 < 5;\n\n      if (!isJPG) {\n        this.$message.error(\"Image type should be JPED or PNG\");\n      }\n\n      if (!isLt2M) {\n        this.$message.error(\"Image size should less than 5MB\");\n      }\n\n      return isJPG && isLt2M;\n    },\n\n    onUploadSuccess() {},\n\n    ...mapActions([\"getTopicList\"])\n  }\n};\n</script>\n<style lang=\"less\">\n.ap-dialog {\n  overflow-x: visible;\n  .dialog-inner {\n    max-height: 60vh;\n    overflow-x: visible;\n    overflow-y: auto;\n    padding: 0 20px;\n  }\n\n  .form-item {\n    width: 100%;\n  }\n\n  .avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .avatar-uploader .el-upload:hover {\n    border-color: #409eff;\n  }\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 400px;\n    height: 180px;\n    line-height: 178px;\n    text-align: center;\n  }\n  .avatar {\n    height: 180px;\n    display: block;\n  }\n}\n</style>\n"],"sourceRoot":"src/views/Manage"}]}